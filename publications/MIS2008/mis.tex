\documentclass[czech]{llncs}
\usepackage{czech}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{amssymb}

\newcommand{\N}{\mathbb{N}}

\title{Implementace GUHA rozhodovacích stromù}
\author{Martin Ralbovskı, Petr Berka}
\institute{Katedra informaèního a znalostního inenırství\\
Fakulta informatiky a statistiky, Vysoká škola ekonomická\\
\email{martin.ralbovsky@gmail.com, berka@vse.cz}}

\begin{document}
\maketitle

\begin{abstract}
Rozhodovací stromy jsou jedním z osvìdèenıch zpùsobù øešení klasifikaèních úloh. Èlánek navrhuje modifikaci klasickıch algoritmù konstrukce rozhodovacích stromù ve smyslu metody GUHA. Tímto smyslem je generování více rozhodovacích stromù jakoto GUHA verifikací. Pøedstavujeme proceduru implementující GUHA rozhodovacích stromù ETree a testujeme uiteènost procedury na pøíkladech. 
\end{abstract}

{\small {\bf Klíèová slova:} Metoda GUHA, rozhodovací stromy, ETree, Ferda}

\section{Úvod}
Náš pøístup kombinuje dvì metody dobıvání znalostí z dat. Metoda GUHA je pùvodní èeská metoda exploraèní analızy dat, její hlavním cílem je nabídnout uivateli vše zajímavé v datech \cite{GUHA1,GUHA2}. Naproti tomu algoritmy tvorby rozhodovacích stromù \cite{Quinlan} patøí k nejznámìjším algoritmùm v oblasti symbolickıch metod strojového uèení. 

Základní myšlenkou v pøíspìvku je vytvoøení více rozhodovacích stromù v dùsledku modifikace klasickıch algoritmù pro indukci rozhodovacích stromù, tyto stromy lze poté povaovat za GUHA verifikace/hypotézy a pro uivatele vybírat jen nejlepší z nich. Navrená procedura pojmenována ETree byla implementována v systému Ferda a byly provedeny poèáteèní experimenty ukazující konstrukci stromù lepších charakteristik, ne byly stromy pùvodní.

Práce je strukturována následovnì: v sekci \ref{section:GUHA} a \ref{section:stromy} seznamujeme ètenáøe se základy metody GUHA a algoritmy pro tvorbu rozhodovacích stromù. Sekce \ref{section:ETree} popisuje novì navrenou proceduru ETree a její implementaci v prostøedí Ferda. Sekce \ref{section:experimenty} shrnuje provedené experimenty a koneènì sekce \ref{section:zaver} uzavírá práci a poskytuje námìty na další vızkum.

\section{Metoda GUHA}
\label{section:GUHA}
Metoda GUHA je jednou z prvních metod exploraèní analızy dat se vznikem v polovinì šedesátıch let v Praze. Metoda poskytuje obecnı rámec k získávání potenciálnì zajímavıch znalostí z dat, kterı má silné teoretické základy v logice (observaèní kalkuly) a statistice \cite{GUHA1,GUHA2}. Pro potøeby tohoto pøíspìvku se omezíme pouze na vysvìtlení základního principu metody GUHA, tak jak je zobrazeno na obrázku \ref{fig:GUHA}.

\begin{figure}[ht]
\centering
\mbox{\resizebox{60mm}{!}{\includegraphics{GUHA.png}}}
\caption{Metoda GUHA}
\label{fig:GUHA}
\end{figure}

Metoda je realizovaná pomocí GUHA procedur. Vstupy tvoøí data a jednoduché zadání potenciálnì velké mnoiny relevantních otázek. Procedura automaticky generuje všechny relevantní otázky a verifikuje je oproti datùm. Vıstupem procedury jsou relevantní otázky, které jsou v datech pravdivé (hypotézy v terminologii metody).

Metoda GUHA se v souèasnosti nejvíce pouívá pro hledání \emph{zobecnìnıch asociaèních pravidel}, k èemu slouí procedura 4FT (\emph{4ft-miner}) \cite{Alternative,Ralbovsky}. Nejnovìjšími systémy podporujícími metodu GUHA jsou systém \emph{LISp-Miner}\cite{Simunek} a Ferda\cite{Ferda}, oba vyvíjené na KIZI FIS VŠE. 

\section{Rozhodovací stromy}
\label{section:stromy}
Podle \cite{KDNuggets} jsou rozhodovací stromy vùbec nejpouívanìjší technikou dobıvání znalostí z databází. Za svou popularitu vdìèí zejména intuitivní interpretovatelnosti a pochopitelnému zpùsobu konstrukce rozhodovacích stromù. Algoritmus konstrukce (indukce) rozhodovacích stromù vysvìtlíme podrobnìji, nebo bude jeho pochopení dùleité pro další text.

Pøi tvorbì rozhodovacího stromu se postupuje metodou \emph{rozdìl a panuj}. Trénovací data se postupnì rozdìlují na menší a menší podmnoiny (uzly stromu) tak, aby v tìchto podmnoinách pøevládaly pøíklady jedné tøídy. Tento postup bıvá èasto nazıván "top down induction of decision trees" (TDIDT)\cite{Quinlan}. Obecné schéma algoritmu pro tvorbu rozhodovacích stromù je v tabulce \ref{tab:TDITD}.

\begin{table}[ht]
	\centering
	\caption{Obecnı algoritmus pro tvorbu rozhodovacích stromù}
	\label{tab:TDITD}	
		\begin{tabular}{|p{11cm}|}
			\hline
			\textbf{TDITD Algoritmus}\\
			\\
			1. zvol jeden atribut jako koøen dílèího stromu,\\
			2. rozdìl data v tomto uzlu na podmoiny podle hodnot zvoleného atributu a~pøidej uzel pro kadou podmnoinu,\\
			3. existuje-li uzel, pro kterı nepatøí všechna data do tée tøídy, pro tento uzel opakuj postup od bodu 1, jinak skonèi.\\
			\hline
		\end{tabular}
\end{table}

Uvedenı algoritmus bude fungovat pouze pro kategoriální data (poèet podmnoin - uzlù v bodì 2 odpovídá poètu hodnot daného atributu), která nejsou zatíena šumem. Uvedenım zpùsobem pracuje napø. Quinlanùv algoritmus ID3 \cite{Quinlan}. Tato dvì omezení lze samozøejmì pøekonat odstranìním šumu èi kategorizací reálnıch numerickıch dat ve fázi pøedzpracování dat. 

Poadavek na konzistenci stromu s (trénovacími) daty (3. bod algoritmu) bıvá v souèasnıch implementacích zmìkèen buï následnım proøezáním, nebo poadavkem na zastavení rùstu stromu, pokud v uzlu patøí do poadované tøídy dostateènı poèet prvkù, a u v absolutním èi relativním vyjádøení. V druhém pøípadì mluvíme o \emph{èistotì uzlu}\footnote{Èistota uzlu je pomìr správnì klasifikovanıch prvkù ku všem prvkùm}.

Klíèová otázka celého algoritmu je jak vybrat vhodnı atribut pro vìtvení stromu (bod 1). Cíl je zøejmı: vybrat takovı atribut, kterı od sebe nejlépe odliší pøíklady rùznıch tøíd atributu, podle kterého se má klasifikovat. Vıpoèet vychází z kontingenèní tabulky zobrazené v tabulce \ref{tab:cont}. 

\begin{table}[ht]
	\centering
	\caption{Kontingenèní tabulka pro vıbìr atributu pro vìtvení stromu}
	\label{tab:cont}	
		\begin{tabular}{|p{1cm}|p{1cm} p{1cm} p{2cm} p{1cm} |p{1cm}|}
			\hline
			& $Y_{1}$ & $Y_{2}$ & \dots\dots\dots & $Y_{S}$ & $\Sigma$ \\
			\hline
			$X_{1}$ & $a_{11}$ & $ a_{12} $ & \dots\dots\dots & $a_{1S}$ & $r_{1}$ \\
			$X_{2}$ & $a_{21}$ & $ a_{22} $ & \dots\dots\dots & $a_{2S}$ & $r_{2}$ \\
			:       & :        & :        &                   & : & : \\
			:       & :        & :        &                   & : & : \\
			$X_{R}$ & $a_{R1}$ & $ a_{R2} $ & \dots\dots\dots & $a_{2S}$ & $r_{R}$ \\
			\hline
			$\Sigma$ & $s_{1}$ & $s_{2}$ & \dots\dots\dots & $s_{S}$ & n\\
			\hline
		\end{tabular}
\end{table}

$Y_{i}$ jsou v tabulce tøídy klasifikaèního atributu, $X_{i}$ jednotlivé atributy a $a_{i,j}$ je èetnost kombinace $(X=X_{i}) \wedge (Y=Y_{j})$. Dále

$$ r_{i} = \sum_{j=1}^S a_{ij}, s_{j} = \sum_{i=1}^S a_{ij}, n = \sum_{i=1}^R \sum_{j=1}^S a_{ij}. $$

Uveïme ètyøi vzorce pro posouzení vhodnosti atributu. Kritérium entropie má podobu:

$$ H(X) = \sum_{i=1}^R \frac{r_i}{n} \left( - \sum_{j=1}^S \frac{a_{ij}}{r_i} \log_2 \frac{a_{ij}}{r_{i}} \right), $$

pøièem preferujeme atribut s nejniší hodnotou kritéria.
Kritérium Gini indexu má podobu:

$$ Gini(X) = \sum_{i=1}^R \frac{r_i}{n} \left( 1 - \sum_{j=1}^S \left( \frac{a_{ij}}{r_i} \right) ^2 \right), $$

pøièem se preferujeme atribut s nejniší hodnotou kritéria. Kritérium $\chi^2$ má podobu: 

$$ \chi^2(X) = \sum_{i=1}^R \sum_{j=1}^S \frac{ \left( a_{ij} - \frac{r_i \cdot s_j}{n} \right) ^2 }{\frac{r_i\cdot s_j}{n}}, $$

pøièem preferujeme atribut s nejvyšší hodnotou kritéria. Koneènì kritérium vzájemné informace má podobu:

$$ MI(X) = - \sum_{i=1}^R \sum_{j=1}^S \frac{a_{ij}}{n} \log_2 \frac{\frac{a_{ij}}{n}}{\frac{r_i}{n} \cdot \frac{s_j}{n} }, $$

pøièem opìt preferujeme atribut s nejvyšší hodnotou kritéria.

Pouití rozhodovacího stromu pro klasifikaci novıch pøípadù je velmi prosté. Poèínaje koøenem stromu se postupnì zjišují hodnoty atributù. Konkrétní hodnota odpovídá urèité vìtvi, která nás pøivede k dalšímu atributu, a se dostaneme do listového uzlu, kterı odpovídá tøídì, do které máme novı pøíklad zaøadit.

\section{Procedura ETree}
\label{section:ETree}

\subsection{Návrh procedury}
\label{section:Navrh}
Algoritmy pro tvorbu rozhodovacích stromù postupují gradientním zpùsobem, jednou vybrané vìtvení se ji nemìní a vısledkem algoritmu je jeden strom. Navrhovanı algoritmus pro tvorbu \emph{exploraèních stromù} pøedstavuje jednoduché rozšíøení tohoto pøístupu, které ale více vyhovuje základní myšlence metody GUHA: hledat v datech "vše" zajímavé. Algoritmus je ve velmi zjednodušené podobì zobrazen v tabulce \ref{tab:ETree}.

\begin{table}[ht]
	\centering
	\caption{Algoritmus ETree pro tvorbu exploraèních stromù}
	\label{tab:ETree}	
		\begin{tabular}{|p{11cm}|}
			\hline
			\textbf{Algoritmus ETree}\\
			\\
			1. forall atribut vhodı jako koøen dílèího stromu,\\
			\hspace{10mm}2. rozdìl data v tomto uzlu na podmnoiny podle hodnot\\
			\hspace{14mm}zvoleného atributu a~pøidej uzel pro kadou podmnoinu,\\
			\hspace{10mm}3. existuje-li uzel, pro kterı není splnìno kritérium zastavení,\\ 
			\hspace{14mm}pro tento uzel opakuj postup od bodu 1, jinak skonèi.\\
			\hline
		\end{tabular}
	\end{table}

Navrhovanı algoritmus se od klasickıch algoritmù pro tvorbu rozhodovacích stromù (tabulka \ref{tab:TDITD}) liší:

\begin{enumerate}
	\item v pouití více atributù pro vìtvení v urèitém místì stromù (bod 1 algoritmu)
	\item v rùznıch variantách kritéria pro zastavení rùstu stromu (bod 3 algoritmu)
\end{enumerate}

Jako kritérium vhodnosti atributu pro vìtvení bylo vybráno $\chi^2$ (které je zároveò tradièním kvantifikátorem metody GUHA). Toto kritérium umoòuje nejen uspoøádat atributy podle vhodnosti, ale i vyhodnotit sílu závislosti mezi uvaovanım atributem a tøídou. 

Co se tıèe kritéria pro zastavení rùstu stromu tıká, uvaujeme \emph{minimální èistotu listu}, co je obecnìjší poadavek ne náleení všech prvkù listu do jedné tøídy (bod 3 algoritmu TDITD) a dále také poadavek na \emph{minimální frekvenci uzlu}. Tyto kritéria mohou platit samostatnì nebo v disjunkci.

\medskip
Procedura tedy generuje znaèné mnoství stromù. Horní odhad poètu stromù vyjadøuje následující vzoreèek. Pøedpokládáme nepouití ádného kritéria pro zastavení vìtvení kromì dosaení maximální hloubky. 

$$ NT = k \cdot \prod_{i=1}^{i_{max}} k^{v_i} $$

kde $k$ je poèet atributù pouitıch pro vìtvení, $i$ je hloubka stromu a $v_i$ je poèet uzlù hloubky $i$. V reálnıch pøípadech hodnoty $v_i$ závisí na datech. Proto ho ve vıpoètech nahrazujeme nejvìtším poètem kategorií u vstupních atributù, co opìt odhad zvyšuje.

Je zøejmé, e ne všechny vytvoøené stromy budou dobøe klasifikovat vstupní data. Kvalitu jednotlivıch stromù mùeme hodnotit na základì tzv. \emph{matice zámìn} (confusion matrix), která ukazuje poèet správnì a chybnì klasifikovanıch pøíkladù. 

\begin{table}[ht]
	\centering
	\caption{Matice zámìn}
	\label{tab:Confusion}	
		\begin{tabular}{|p{25mm}|p{15mm}|p{15mm}|}
			\hline
			& \multicolumn{2}{c|}{Klasifikace systémem} \\
			\hline
			Správné zaøazení & $+$ & $-$ \\
			\hline
			$+$ & TP & FN\\
			\hline
			$-$ & FP & TN\\
			\hline
		\end{tabular}
\end{table}

Tabulka \ref{tab:Confusion} zobrazuje matici zámìn, kde \emph{TP} (správnì pozitivní, true positive) je poèet prvkù, které systém správnì zaøadil do tøídy $+$, \emph{FP} (falešnì pozitivní, false positive) je poèet pøíkladù, které systém chybnì zaøadil do tøídy $+$ (patøí do tøídy $-$) atd. Kvalitu stromu mùeme hodnotit funkcí $f:(TD,FN,FP,TN) \rightarrow \langle0,1\rangle$. Pouívaná je napøíklad \emph{F-míra} \cite{Rijsbergen}.

$$ F = \frac{2 \cdot TP }{2 \cdot TP + FP + FN} $$

Matice zámìn formálnì odpovídá ètyøpolní kontingenèní tabulce známé z dobıvání zobecnìnıch asociaèních pravidel \cite{Rauch}. Pro hodnocení kvality stromu mùeme pouít také libovolnı vhodnı \emph{4ft-kvantifikátor} \cite{Rauch}. V této souvislosti je vhodné poznamenat, e F-míra patøí do tøídy \emph{dvojitì implikaèních kvantifikátorù}, jak definováno v \cite{Rauch}. Dùkaz tohoto tvrzení je jednoduchı a bude analogickı dùkazu pouitém v pøíkladu 3 v \cite{Rauch}. 

\subsection{Parametry ETree}
Ve smyslu metody GUHA mùeme na vıstupní stromy nahlíet jako na hypotézy GUHA\footnote{Rozhodovací stromy je moné srovnat s asociaèními pravidly, jakoto nejpouívanìjšími druhy hypotéz metody GUHA. Jednu cestu v rozhodovacím stromu od koøene k listu lze pøirovnat k asociaènímu pravidlu, kde levá strana pravidla je konjunkce atributù a jejich hodnot odpovídajícím uzlùm v cestì a pravá strana klasifikovaná kategorie. Celı rozhodovací strom si bude potom tvoøit disjunkci asociaèních pravidel odpovídajících všem cestám. Takto mùe i procedura 4FT vrátit stejnı vısledek jako ETree, ovšem s exponenciální èasovou sloitostí.}.

 V sekci \ref{section:GUHA} byly definovány vstupy pro GUHA procedury, z nich nás bude zajímat definice mnoiny relevantních otázek pro proceduru ETree. Oproti jinım procedurám metody GUHA jsou to spíše parametry algoritmu. Logicky se dají rozdìlit na ètyøi skupiny: \textbf{parametry pro rùst}, \textbf{pro vìtvení}, \textbf{pro zastavení vìtvení} a \textbf{pro uloení hypotézy}.

\textbf{Parametry pro rùst stromu} byly vysvìtleny v pøedcházejícím textu a jsou to:
\begin{itemize}
	\item cílovı atribut rozdìlující data do tøíd
	\item vstupní atributy pro vìtvení
	\item poèet atributù pouitıch pro vìtvení
\end{itemize}

Pøeskoème parametry pro vìtvení a vyjmenujme nejdøíve \textbf{parametry pro zastavení vìtvení}, nebo první tøi z nich byly také vysvìtleny:
\begin{itemize}
	\item minimální frekvence uzlu
	\item minimální èistota listu
	\item vıbìr kritéria pro zastavení vìtvení (minimální frekvence uzlu, minimální èistota listu, minimální frekvence uzlu \emph{nebo} minimální èistota listu)
	\item maximální hloubka stromu
\end{itemize}

Vıznam posledního parametru je zøejmı, udává pøípustnou hloubku stromu. Po dosaení této hloubky se ji strom dále nevìtví. 

\textbf{Parametr pro vìtvení} v pùvodním návrhu procedury nebyl, vznikl a v prùbìhu implementace. Obrázek \ref{fig:Branch2} ukazuje odlišné monosti vìtvení uzlù a vniku novıch stromù. Uzly \emph{A} a \emph{B} byly vybrány algoritmem jako vhodné pro vìtvení. Mùeme postupovat jako v klasickıch algoritmech vìtvením všech vhodnıch uzlù najednou (zde uzly A i B - situace a), 
nebo pro kadı uzel vytvoøíme novı strom a v tomto stromu vìtvíme pouze vybranı uzel (situace B). 
Jak ukazuje obrázek, nevıhoda druhého postupu je vznik více stromù na vıstupu, z nich nìkteré budou identické. Zde jsme se rozhodli ponechat volbu na uivateli a vytvoøili jsme parametr pro vìtvení nazvanı \emph{vìtvení uzlù po jednom} (individual nodes branching).

\begin{figure}[ht]
\centering
\mbox{\resizebox{115mm}{!}{\includegraphics{Branch2.png}}}
\caption{Vìtvení uzlù po jednom}
\label{fig:Branch2}
\end{figure}

Poslední skupinou jsou \textbf{parametry pro uloení hypotézy}:
\begin{itemize}
	\item minimální kvalita stromu vyjádøena pomocí matice zámìn a konjunkcí 4ft-kvantifikátorù 
	\item pouze maximální stromy
	\item maximální poèet hypotéz
\end{itemize}

Funkci matici zámìn jsme popsali v sekci \ref{section:Navrh}. Booleovskı parametr \emph{pouze maximální stromy} urèuje, jestli se na vıstup mají dostat všechny stromy, nebo pouze stromy poadované délky (v pøípadì nedosaení této délky to budou stromy o délce rovnající se poètu vstupních atributù pro vìtvení). Poslední parametr udává poèet vygenerovanıch hypotéz, po kterıch se vıpoèet pøeruší.

\subsection{Implementace}
Procedura ETree byla implementována v prostøedí Ferda\cite{Ferda}. Ferda je vizuální a vysoce modulární systém pro dobıvání znalostí a je zároveò nejmladší implementací metody GUHA. ETree je ji devátá GUHA procedura v systému. Pouili jsme stávající vrstvu pøedzpracování dat a engine pro práci s bitovımi øetízky \emph{mining processor} \cite{Kuchar}. Vznikla krabièka ETree (krabièka je ve Ferdovi prvek vizuálního programování, vice v \cite{Ferda}), její zapojení ukazuje obrázek \ref{fig:Ferda}.

\begin{figure}[ht]
\centering
\mbox{\resizebox{80mm}{!}{\includegraphics{Ferda.png}}}
\caption{Zapojení ETree v prostøedí Ferda}
\label{fig:Ferda}
\end{figure}

Na obrázku je øešena jednoduchá klasifikaèní úloha, zjišujeme jestli dát klientovi úvìr v závislosti na jeho pøíjmu, vıši jeho konta, pohlaví a zamìstnanosti. Zelenı ètverec zobrazuje stávající implementované krabièky, které slouí ke konstrukci atributù. Za nì je zapojena krabièka ETree. Modrı ètverec jsou 4ft-kvantifikátory urèené pro mìøení kvality pravidla. Vıhodou tohoto øešení je znovupouitelnost pro uivatele - ETree se dá zapojit do krabièek pro konstrukci atributù stejnım zpùsobem, jako kadá jiná GUHA procedura implementovaná v systému Ferda.

\section{Experimenty}
\label{section:experimenty}
Pro otestování procedury bylo provedeno nìkolik experimentù. Experiment s datovım zdrojem \emph{Barbora} popisuje èást \ref{section:Barbora}. Dva experimenty s datovım zdrojem \emph{Forest cover type} popisují èásti \ref{section:vzorek} a \ref{section:cele}.

\subsection{Barbora}
\label{section:Barbora}
Jako první testovací data jsme vybrali data klientù hypotetické banky Barbora \cite{Barbora}. Databáze neobsahuje reálná data, pouze záznamy pøedgenerované na základì znalostí domény. 

První experiment byl proveden nad tabulkou \emph{loans}, která obsahuje informace o klientech a jeho statutu (celkem zhruba 6100 záznamù). Experiment konstruoval stromy, které zjišovaly statut klienta (rozdìlení do 4 tøíd) z informací o okresu, platu klienta a vıši a trvání jeho pùjèky. Parametry zadání procedury byly následující:

\begin{itemize}
	\item poèet atributù pro vìtvení = 4
	\item minimální èistota listu = 0,8
	\item minimální frekvence uzlu = 61 (1\% dat)
	\item vìtvení uzlù po jednom = true	
	\item minimální kvalita stromu: F-míra s promìnlivım prahem (viz. dále)
\end{itemize}

Cílem experimentu bylo zjistit, jestli mùe procedura vygenerovat více stromù podobné kvality (pøi zvyšující se hloubce stromu). Byly pouity zvìtšující se prahy F-míry a vısledky jsou zobrazeny v následující tabulce.

\begin{table}[ht]
	\centering
	\caption{Experiment Barbora}
	\label{tab:Barbora}	
		\begin{tabular}{|p{20mm}|p{25mm}|p{18mm}|p{18mm}|p{30mm}|}
			\hline				\textbf{Hloubka stromu} & \textbf{Práh F-míry} & \textbf{Verifikací} & \textbf{Hypotéz} & \textbf{Nejlepší hypotéza} (F-míra) \\
			\hline
			1 & 0,5 & 5 & 2 & 0,75 \\
			2 & 0,7 & 17 & 7 & 0,88 \\
			3 & 0,85 & 193 & 26 & 0,88 \\
			4 & 0,85 & 7910 & 222 & 0,90 \\
			\hline
		\end{tabular}
\end{table}

Uspokojivé vısledky experimentu potvrdily naši domnìnku, e lze zkonstruovat více stromù podobné kvality. Napøíklad pro hloubku 4 bylo sestrojeno celkem 222 rozhodovacích stromù, které se liší v hodnotì F-míry pouze pìti procenty. Data \emph{Barbora} jsou však umìle vygenerována (èásteènì nedokonale), co zøejmì zpùsobilo tak dobré vısledky. Dalším krokem bylo otestovat proceduru na reálném datovém zdroji. 

\subsection{Forest cover type - vzorek}
\label{section:vzorek}
Tímto zdrojem byly data \emph{Forest cover type} z datového repositáøe UCI KDD \cite{UCI}\footnote{Jeden z nejuznávanìjších repozitáøù dat pro benchmarking metod strojového uèení.}. Data Forest cover type obsahují informace o pokrytí lesa pro buòky 30x30 metrù získané z US Forest Service Region 2 Resource Information System. 

V druhém experimentu jsme konstruovali stromy, které urèovaly vıslednı typ pokrytí lesa z informací o chránìném území, nadmoøské vıšce, sklonu svahu, horizontální a vertikální vzdálenosti k vodnímu zdroji a horizontální vzdálenosti k vıskytu poáru. Vstupních atributù bylo celkem 8 a klasifikaèní atribut mìl 7 rùznıch hodnot. Cílem bylo provìøit domnìnku, e pouití více atributù pro vìtvení dává kvalitnìjší stromy. Experiment byl proveden na vzorku pùvodních dat o velikosti 10 000 záznamù z pùvodních asi 600 000 záznamù. Vzorek jsme zkonstruovali vybráním kadého zhruba 60. vzorku z pùvodních dat. Parametry zadání procedury byly následující:

\begin{itemize}
	\item poèet atributù pro vìtvení = 1,3,5
	\item minimální èistota listu = 0,8
	\item minimální frekvence uzlu = 100 (1\% dat)
	\item vìtvení uzlù po jednom = false
	\item minimální kvalita stromu: F-míra s prahem 0.5
\end{itemize}

\begin{table}[ht]
	\centering
	\caption{Experiment Forest cover type - vzorek}
	\label{tab:vzorek}	
		\begin{tabular}{|p{27mm}|p{17mm}|p{15mm}|p{45mm}|}
			\hline
				\textbf{Hloubka stromu}  & \textbf{Verifikací} & \textbf{Hypotéz} & \textbf{Nejlepší hypotéza} (F-míra) \\
			\hline
			\multicolumn{4}{|l|}{Poèet atributù pro vìtvení = 1} \\
			\hline
			1 &  2 & 0 & 0,304 \\
			2 &  3 & 0 & 0,304 \\
			3 &  4 & 0 & 0,385 \\
			4 &  5 & 1 & 0,511 \\
			\hline
			\multicolumn{4}{|l|}{Poèet atributù pro vìtvení = 3} \\
			\hline
			1 & 4 & 0 & 0,304 \\
			2 & 13 & 0 & 0,305 \\
			3 & 40 & 1 & 0,512 \\
			4 & 121 & 3 & 0,816 \\
			\hline
			\multicolumn{4}{|l|}{Poèet atributù pro vìtvení = 5} \\
			\hline
			1 & 6 & 0 & 0,304 \\
			2 & 9 & 0 & 0,385 \\
			3 & 156 & 5 & 0,515 \\
			4 & 781 & 103 & 0,816 \\
			\hline
		\end{tabular}
\end{table}

Tabulka \ref{tab:vzorek} ukazuje vısledky experimentu. Nárùst kvality stromù je vıraznı zejména u delších stromù z 1 atributu pro vìtvení na 3 atributy pro vìtvení, kde napøíklad pro stromy délky 4 je to asi 30\% F-míry\footnote{Cílem experimentu nebylo zkonstruovat co nejkvalitnìjší strom, nıbr zjistit rùst kvality stromù. Proto jsme pouili pouze základní kategorizaci vstupních atributù a nesnaili jsme se primárnì o nìjaké její vylepšování.}.

\subsection{Forest cover type}
\label{section:cele}
Tøetí experiment byl zjednodušením druhého experimentu na celou datovou matici (pøiblinì 600 000 záznamù), vynechali jsme 5 atributù pro vìtvení. Zadání bylo následující:

\begin{itemize}
	\item poèet atributù pro vìtvení = 1,3
	\item minimální èistota listu = 0,8
	\item minimální frekvence uzlu = 6000 (1\% dat)
	\item vìtvení uzlù po jednom = false
	\item minimální kvalita stromu: F-míra s prahem 0,5
\end{itemize}

\begin{table}[ht]
	\centering
	\caption{Experiment Forest cover type}
	\label{tab:cele}
		\begin{tabular}{|p{27mm}|p{17mm}|p{15mm}|p{45mm}|}
			\hline
				\textbf{Hloubka stromu}  & \textbf{Verifikací} & \textbf{Hypotéz} & \textbf{Nejlepší hypotéza} (F-míra) \\
			\hline
			\multicolumn{4}{|l|}{Poèet atributù pro vìtvení = 1} \\
			\hline
			1 &  2 & 0 & 0,304 \\
			2 &  3 & 0 & 0,305 \\
			3 &  4 & 0 & 0,387 \\
			4 &  5 & 1 & 0,807 \\
			\hline
			\multicolumn{4}{|l|}{Poèet atributù pro vìtvení = 3} \\
			\hline
			1 & 2 & 0 & 0,305 \\
			2 & 16 & 0 & 0,305 \\
			3 & 40 & 2 & 0,522 \\
			4 & 121 & 86 & 0,818 \\
			\hline
		\end{tabular}
\end{table}

Tabulka \ref{tab:cele} ukazuje vısledky experimentu. Experiment ukázal podobné vısledky jako experiment pøedchozí s vıjimkou stromù délky 4, kdy byl ve všech datech nalezen strom s F-mírou 0,807 a zlepšení pøidáním atributu bylo pouze 1\%.

\medskip
Shrnutím provedenıch experimentù je konstatování, e má vıznam tvoøit stromy pomocí algoritmu ETree. V nìkterıch datech se konstrukce stromù z více atributù projeví ve vìtší kvalitì techto stromù, ve všech zkoumanıch datech získáváme velké mnoství vysoce kvalitních stromù. 

\section{Závìr}
\label{section:zaver}

\subsection{Shrnutí vykonané práce}
Práce obohacuje tradièní algoritmy na konstrukci rozhodovacích stromù o aspekty metody GUHA pro exploraèní analızu dat. Vzniká novı algoritmus ETree, kterı konstruuje více stromù na základì vıbìru více atributù pro vìtvení uzlù a vìtvení pouze jednotlivıch uzlù.  Algoritmus chápeme v názvosloví metody GUHA také jako novou GUHA proceduru. 

Byla provedena implementace procedury ETree v prostøedí Ferda, kde je ji mono zapojit do stávajících modulù po pøedzpracování dat stejnım zpùsobem jako ostatní GUHA procedury. Byly dále provedeny experimenty, které ukazují pouitelnost našeho pøístupu. Konstrukce více stromù z více atributù se pozitivnì projeví na kvalitì nejlepšího stromu i na mnoství vysoce kvalitních stromù. 

\subsection{Smìry dalšího vızkumu}
ETree nabízí zajímavé monosti dalšího vızkumu. Jednou z moností rozšíøení je vybírat atributy i podle jiného kritéria ne $\chi^2$(další kritéria byly uvedeny v sekci \ref{section:Navrh}). Z hlediska návrhu by bylo nejlepší vytvoøit pro vıbìr atributù novou krabièku a zapojovat ji do krabièky ETree. 

Aby byl nástroj plnì pouitelnı je dále tøeba implementovat klasifikátor samotnıch dat, kterı ještì není hotovı. Prozatím jsme se zajímali pouze o konstrukci stromù a ne jejich pouítí pøi klasifikaci novıch dat.

Odhad poètu relevantních otázek (poètu vygenerovanıch stromù) je zajímavı statistickı problém. Prozatím poèítáme relevantní otázky pomocí nejhorších pøípadù, co je zejména pro rozsáhlejší úlohy nepøesné. Prùmìrné èi jinak vıznamné pøípady by mohli pomoci, problém je však zajímavı zejména tím, e ji pøed prvním vìtvením jakéhokoli z atributù by mìl bıt odhad k dispozici.

Jeden z plánù rozvoje Ferdy je implementace fuzzy metody GUHA, zejména implementace fuzzy bitovıch øetízkù a kvantifikátorù. Tyto zmìny by se samozøejmì tıkaly i procedury ETree, zejména zmìny bitovıch øetízkù na fuzzy. Jakım zpùsobem to ovlivní algoritmus procedury zatím ještì není rozmyšleno.

Náš pøístup je velmi podobnı metodì rozhodovacích lesù, napø. \cite{forests}, ve které se uplatòuje \emph{elektivní klasifikace}, tzn. e stromy z rozhodovacího lesa hlasují o vısledné klasifikaci. Bylo by zajímavé zkusit experimentovat s elektivní klasifikací i u stromù vytvoøenıch pomocí ETree. 

\begin{thebibliography}{99}

\bibitem{forests}
Breiman L. Random Forrests. Machine Learning 45 (2001), 5-32.

\bibitem{GUHA1}
H\'{a}jek P., Havel I., Chytil M.: The GUHA method of
automatic hypotheses determination. Computing 1, 1966, p.~293~--~308

\bibitem{GUHA2}
H\'{a}jek P., Havr\'{a}nek, T.: Mechanising Hypothesis
Formation - Mathematical  Foundations  for  a   General  Theory.
Springer-Verlag: Berlin  - Heidelberg - New York, 1978.

\bibitem{UCI}
Hettich S., Bay S.D.: The UCI KDD Archive [http://kdd.ics.uci.edu]. Irvine, CA: University of California, Department of Information and Computer Science, 1999

\bibitem{KDNuggets}
KDNuggets Polls, Data mining/analytic techniques you use frequently.
\url{www.kdnuggets.com/polls/2005/data\_mining\_techniques.htm}

\bibitem{Ferda}
Kov\'{a}\v{c} M., Kucha\v{r} T., Kuzmin A., Ralbovsk\'{y} M.: Ferda, 
New Visual Environment for Data Mining. Znalosti 2006, 
Conference on Data Mining, Hradec Kr\'{a}lov\'{e} 2006, p.~118~--~129 (in Czech)

\bibitem{Kuchar}
Kucha\v{r} T.: Experimental GUHA Procedures, Master Thesis, 
Faculty of Mathematics and Physics, Charles University, Prague 2006 (in Czech)

\bibitem{Quinlan}
Quinlan J. R.: Induction of Decision Trees. Machine Learning 1(1), 1986, 81 - 106

\bibitem{Ralbovsky}
Ralbovs\'{y} M., Kucha\v{r} T.: 
Using Disjunctions in Association Mining. 
In: P. Perner (Ed.),
Advances in Data Mining - Theoretical Aspects and Applications, LNAI
4597, Springer Verlag, Heidelberg 2007

\bibitem{Rauch}
Rauch J.: Logic of Association Rules. In: Applied Inteligence, Vol. 22,
Issue 1, p.~9~--~28

\bibitem{Barbora}
Rauch J.: Mining for Association Rules in Financial Data. In: Seminar on Data Mining for Decision Support in Marketing. Porto: LIACC, 2001

\bibitem{Alternative}
Rauch J., \v{S}im\accent23unek, M.: An Alternative Approach to Mining
Association Rules. Lin T Y, Ohsuga S, Liau C J, and Tsumoto S (eds):
Foundations of Data Mining and Knowledge Discovery, Springer-Verlag, 2005
p.~219~--~239

\bibitem{Rijsbergen}
Van Rijsbergen C.J.: Information Retrieval. Butterworth-Heinemann Newton, MA USA 1979

\bibitem{Simunek}
\v{S}im\accent23unek M.: Academic KDD Project LISp-Miner.
In Abraham A. et al (eds): Advances in Soft
Computing - Intelligent Systems Design and Applications, 
Springer Verlag 2003

\end{thebibliography}

\medskip

\end{document}