\chapter{Úvod}
V této kapitole jsou uvedeny základní pojmy dataminingu. Je popsána
metoda GUHA a jiné metody, jejich implementace. Podrobnìji je
popsán relaèní datamining. Také je zde pøedstaveno prostøedí
Ferda DataMiner, pro které probìhla implementace relaèních rozšíøení.
\label{uvod}
\section[Úvod do dobývání znalostí]{Úvod do dobývání znalostí z dat}

\subsection{Pøehled}
Data mining (DM) je analytická metodologie získávání
netriviálních skrytých a potenciálnì užiteèných informací z dat.
Nìkdy se chápe jako analytická souèást dobývání znalostí z databází
(Knowledge Discovery in Databases, KDD), jindy se tato dvì oznaèení chápou jako souznaèná.\footnotemark{}

\footnotetext{Definice je pøevzata z http://cs.wikipedia.org/wiki/Data\_mining}
Zde se budeme zabývat
nalezením vzorù nebo vztahù (z anglického slova \emph{patterns})
v podobì asociaèních pravidel a asociaèních pravidel SDS
(podrobnìji viz \ref{asociacnipravidla}).
\paragraph{}
Dobývání znalostí stojí na po\-mezí výpoèetních
statis\-tických metod, data\-bázových techno\-logii a strojo\-vého uèení.
Meto\-dami dobývání zna\-lostí se dají øešit úlohy desk\-ripce dat, suma\-rizace,
segmentace, deskripce konceptù, klasifikace, predikce a analýzy závislostí
v celé øadì aplikaèních oblastí.

\subsection{Metody dobývání znalostí}
\paragraph{}
Pøi dobývání znalostí z dat lze použít více metod. Dobrých výsledkù
lze dosáhnout pøi jejich kombinaci. Jako pøíklad mùžeme uvést statistické
procedury, rozhodovací stromy, neuronové sítì nebo asociaèní pravidla, se
kterými pracuje metoda GUHA a kterými se zde budeme podrobnìji zabývat.

\subsection[Asociaèní pravidla ''nákupních košíkù'']{Asociaèní pravidla -- analýza nákupních košíkù}
\label{asociacnipravidla}
\paragraph{}
''Klasické'' asociaèní pravidlo je definováno Aggravalem (\cite{aggraval})
v souvislosti s analýzou nákupního košíku.
\paragraph{}
Klasické asociaèní pravidlo je ve tvaru $X \to Y$, kde $X$ a $Y$ znaèí
dvì množiny prvkù. Toto pravidlo nám øíká, že transakce obsahující prvky z $X$,
mají tendenci obsahovat prvky z $Y$.
\paragraph{}
Analogie s nákupními košíky øíká, že
když nákupní koš obsahuje množinu pøedmìtù $X$, 
pravdìpodobnì bude obsahovat množinu pøedmìtù $Y$. Napøíklad klienti, kteøí
nakoupí víno, èasto nakupují také sýry.
Každý z nákupních košíku $b_{1},\ldots, b_{n}$ tedy obsahuje
nìkteré z položek $P_{1},P_{2},\ldots,P_{K}$.
\begin{table}[!h]
\begin{center}
\begin{tabular}{|c|c|}
\hline
Nákupní košík & Položky \\
\hline
$b_{1}$ & $P_{1},P_{2},P_{3},P_{4},P_{5}$ \\
\hline
$b_{2}$ & $P_{2},P_{3},P_{4},P_{5},P_{K}$ \\
\hline
$b_{3}$ & $P_{1},P_{3},P_{12}$ \\
\hline
$b_{4}$ & $P_{1},P_{3}$ \\
\hline
\vdots & \vdots \\
\hline
$b_{n-1}$ & $P_{2},P_{4},P_{7},P_{7},P_{107}$ \\
\hline
$b_{n}$ & $P_{2},P_{4},P_{K}$ \\
\hline
\end{tabular}
\end{center}
\caption{Pøíklad množiny transakcí}
\end{table}
\paragraph{}
Výraz $P_{2}, P_{5} \to P_{1}, P_{3}$ je pøíklad asociaèního pravidla, které øíká, že
nákupní košíky obsahující položky $P_{2}$ a $P_{5}$, èasto obsahují i položky $P_{1}$ a $P_{3}$.
\paragraph{}
Analýzou transakcí supermarkety mohou
optimalizovat rozmístìní zboží v prodejnì a zajistit rychlejší a výnosnìjší
prodej. Pro dobývání znalostí za využití takových pravidel byl navržen
algoritmus Apriori, viz \cite{aggraval}.
\subsection{GUHA}
GUHA je zkratka pro General Unary Hypotheses Automaton. Teoretický základ byl
formulován Hájkem v roce 1966 (podrobnìji viz \cite{guha66}),
detailnìji pak v \cite{guhabasic}.
Pro ilustraci uvádíme obrázek \ref{fig:praceguha}.
\paragraph{}
\begin{figure}[!h]
\begin{center}
\includegraphics[width=9cm]{pics/guha.eps}
\end{center}
\caption{Práce metody GUHA}
\label{fig:praceguha}
\end{figure}
\paragraph{}
Metoda GUHA je realizována procedurami GUHA. Procedura je program, který na základì
vstupu, který je tvoøen analyzovanými daty a jednoduchým zadáním relevantních vztahù,
generuje zadané vztahy (rovnìž se používá termín relevantní otázky) a ovìøuje je
oproti vstupním datùm. Výstupem jsou pak všechny vztahy (také hypotézy), které jsou prosté.
Hypotéza je prostá, jestliže je pravdivá 
v analyzované datové matici a zároveò nevyplývá z jiných, jednodušších hypotéz.
\paragraph{}
Jednou z nejdùležitìjších procedur GUHA je procedura ASSOC (podrobnìji v \cite{guhabasic}),
která hledá asociaèní pravidla. Mùže vybírat i jiná než klasická asociaèní pravidla, 
napøíklad pravidla, která odpovídají statistickým testùm hypotéz.
Tato pravidla jsou daleko obecnìjší než ''klasická'' asociaèní pravidla 
definovaná v souvislosti s analýzou nákupních košíkù.
\paragraph{}

\subsection{Relaèní dobývání znalostí}
\paragraph{}
Existující metody dobývání znalostí byly pøevážnì navrženy pro data uložena
v jedné datové matici (tzv. flat-file). Pøi takové organizaci dat øádky datové
matice reprezentují pozorování (objekty studia, osoby, záznamy, pøedmìty apod.)
a sloupce datové matice reprezentují promìnné (vlastnosti, atributy nebo
charakteristiky). Aèkoliv takový pohled na zkoumaná data zjednoduší metody
používané pro dobývání znalostí, v praxi se velmi èasto vyskytují data ve složitìjší
reprezentaci, napøíklad, ve vícero datových maticích, které jsou mezi sebou
v relaci.
\paragraph{}
Je samozøejmì možné požadovaná data spojit do jedné datové matice, avšak takový úkon
je èasovì velmi nároèný a èasto se musí provést manuálnì pro každou úlohu, chceme-li
zkoumat napøíklad jiné atributy objektù z matice.
\paragraph{}
Nìkteré úlohy pro dobývání znalostí navíc nejdou jednoduše provést nad ''plochou''
reprezentaci, obzvláštì v pøípadì, kde uvažujeme mnoho rùzných objektù s jejich
vlastnostmi a vzájemnými vztahy. Cílem zavedení relaèního dataminingu je odstranìní
omezení na jednu tabulku dat a umožnìní dobývání znalostí z více relaènì
propojených datových tabulek. Navíc, jak uvádí T.Kar\-ban v \cite{dateso2005},
ponechání dat v relaèním tvaru mùže zachovat informace, které mohou být
vyjádøeny ve formì relaèních vztahù.

\section{Ferda DataMiner a další implementace metody GUHA}
\label{ferdaproject}

\subsection{LISp-Miner}
Od roku 1996 se na pražské VŠE vyvíjí systém LISp-Miner.
Jde o akademický softwarový systém pro výuku (zejména na Fakultì informatiky a statistiky
Vysoké školy ekonomické v Praze a Matematicko-fyzikální fakultì Univerzity Karlovy
v Praze) a výzkum v oblasti dobývání znalostí z databází. Systém obsahuje øadu modulù,
které umožòují potøebným zpùsobem transformovat prvotní data, provádìt vlastní analýzy
a vhodným zpùsobem prezentovat výsledky.
Systém je stále ve vývoji, který pokrývá jak implementaci nových modulù, tak i~prohlubování
a~rozšiøování modulù již implementovaných. Vedlejším dùsledkem tohoto vývoje jsou stále
vìtší nároky na uživatele systému,
pokud chce využít všech možností systému LISp-Miner.
Podrobné informace o systému LISp-Miner lze nalézt v \cite{guha}.
\subsection{Rel-Miner}
Systém Rel-Miner je softwarový projekt vznikající v rámci disertaèní práce (viz. \cite{relminer} )
Mgr. Tomáše Karbana na Matematicko-fyzikální fakultì Univerzity Karlovy.
Cílem je vytvoøení systému pro dobývání asociaèních pravidel z relaèních dat nad hvìzdicovým schématem (dále jen relaèní), což vyžaduje rozšíøení jazyka asociaèních pravidel pro pokrytí více než jedné datové matice. Základní implementaèní techniky (napø. princip bitových øetìzcù),  zùstávají stejné jako døíve v systému LISp-Miner
a nyní systému Ferda DataMiner. Stávající implementace dataminingových procedur a parametrù zadávání úlohy,
které vznikly v rámci diplomové práce T.Kuchaøe, jsou inspirovány právì systémem Rel-Miner. Rovnìž
tato diplomová práce má nìkteré podobné cíle jako Rel-Miner.
\paragraph{}
Rozdíly jsou zejména ve vìtším teoretickém pøínosu projektu Rel-Miner, také v zamìøení
T.Karbana hlavnì na možnost distribuovanosti bìhu relaèních i obecnì nerelaèních dataminingových
procedur. Podstatným rozdílem je zpùsob implementace: Rel-Miner byl od poèátku vyvíjen
jako samostatné softwarové dílo, které je zamìøeno na teoretické aspekty relaèního
dobývání dat a implementace je spíše vzorová a obsahuje relaèní rozšíøení pouze procedury 4ft-Miner,
kdyžto implementace relaèních rozšíøení v rámci této diplomové práce je zamìøená na práci
v prostøedí Ferda DataMiner, na využití veškerých jeho uživatelských i programátorských
výhod a již implementovaných prostøedkù. Mìla za cíl kromì dvou implementovaných procedur 
relaèního dataminingu položit základy pro snazší pøidávání relaèních rozšíøení pro zbývající
 procedury v rámci systému Ferda DataMiner.
\paragraph{}
Rel-Miner mìl být prvotní implementací v oblasti relaèního dataminingu a principu bitových øetìzcù.
Momentálnì je projekt ve stádiu dokonèení, nicménì ještì není hotov a autorovi této práce není
známo, zda již existuje ve spustitelné podobì umožòující bìh relaèních dataminingových úloh.
Podobnì jako systém LISp-Miner je i systém Rel-Miner vytváøen pøedevším pro výzkumné úèely
a bude tedy vhodný pro malé a støednì velké projekty, pøedevším pak pro výuku studentù.
\subsection{Ferda DataMiner}
Ferda DataMiner (\verb+http://sourceforge.net/projects/ferda+)
vznikl jako softwarový projekt na Matematicko-fyzikální fakultì Univerzity Karlovy.
Mìl odstranit nejvìtší nedostatky systému LISp-Miner zejména v oblasti modularity
a jednoduchosti uživatelské práce.
Pøedstavuje spoleèné vizuální prostøedí pro šestici
výše uvedených procedur systému LISp-Miner, pøináší vizuální model postupu dobývání
znalostí podobný modelùm v komerèních systémech SPSS Clementine, SAS Enterprise Miner apod.
Srovnání s tìmito systémy je rovnìž uvedeno v \cite{ferda}.

\subsection{Krabièky}
Ferda pøináší pohled na zadání úlohy dobývání znalostí jako na zapsání funkce
pomocí jistých vizuálních objektu -- tzv. krabièek. Každá krabièka zastává také
roli funkce nebo nìkolika funkcí. Krabièky mají parametry a vyhodnocují své
funkce nad hodnotami tìchto parametru. Parametrùm se u~krabièek øíká zásuvky.
Do zásuvek se zapojují jiné krabièky. Krabièky jsou rozdìleny podle typu a do
každé zásuvky lze zapojit pouze nìkteré typy krabièek.

Pomocí rady jednoduchých krabièek je uživateli umožnìno sestavovat vlastní
algoritmy. Ferda tedy rovnìž pøedstavuje nìco jako uživatelský programovací
jazyk. Na krabièky se lze však také dívat jako na konstrukce logiky èi
sémantiky, ke které existuje lambda-kategoriální gramatika. Pro ilustraci prostøedí
uvedeme obrazovku z prostøedí Ferda jako obrázek \ref{fig:ferdatutorial}.
\begin{figure}[!h]
\begin{center}
\includegraphics[width=12cm]{pics/ferda-tutorial.eps}
\end{center}
\caption{Hlavní obrazovka prostøedí Ferda DataMiner}
\label{fig:ferdatutorial}
\end{figure}
\paragraph{}
Krabièkový model je považován za nejvìtší pøínos prostøedí Ferda DataMiner. Nová funkcionalita
se do prostøedí mùže pøidat ve formì krabièky zapojitelné mezi stávající krabièky. V této diplomové práci
autor implementuje metody uvedené v kapitole \ref{cile} ve formì krabièek, které se zapojují 
do stávajícího zadání úlohy.

\subsection{Diplomová práce ''Experimentální GUHA procedury''}
Zásadním pøínosem pro prostøedí Ferda DataMiner se stala diplomová práce T.Kuchaøe
''Experimentální GUHA procedury'', která pøinesla novou implementaci krabièek šesti
procedur pro dobývání znalostí a zobecnìní nìkterých prvkù zadání úlohy oproti jejich
stávající implementaci v systému LISp-Miner. 
\paragraph{}
Pøi implementaci relaèních rozšíøení procedur autor vycházel z jejich nové implementace
v rámci výše uvedené práce. 
Popis provázanosti se systémem Ferda DataMiner a konkrétnì
s novou implementaci dataminingových procedur od T.Kuchaøe v rámci jeho
diplomové práce \cite{kuchar} je souèástí popisu implementace a patøí
do kapitoly \ref{implementation}.


\section{Dùležité rysy metody GUHA}
Zde bude následovat struèný pøehled principù dobývání znalostí dle metody GUHA,
které jsou nezbytné k pochopení popisu samotné problematiky a implementace
zadání dané diplomové práce. Tyto principy jsou obecné a byly využity pøi implementaci
v systémech pro dobývání znalostí pracujících na principu
GUHA -- viz \ref{implementations}. Pro zevrubnìjší popis autor doporuèuje
prostudování zejména zdrojù \cite{guha} a \cite{kuchar}.

\subsection{Booleovské atributy}
Následuje definice booleovského atributu, jak je uvedena v \cite{guha}.

\newtheorem{booleanattributedef}{Definice booleovského atributu}
\begin{booleanattributedef}
Booleovský atribut je formule splòující následující podmínky.
\paragraph{}
Pokud \emph{A} je atribut a $\alpha$ je neprázdná podmnožina množiny
\{$a_{1},\ldots,a_{k}$\}, pak $A(\alpha)$ je \emph{základní booleovský atribut}.
$\alpha$ je koeficient základního booleovského
atributu $A(\alpha)$. Každý základní booleovský atribut je booleovský atribut.
Pokud $\phi$ a $\psi$ jsou booleovské atributy, pak $\phi \wedge \psi$,
$\phi \vee \psi$ a $\neg\phi$ jsou odvozené booleovské atributy. Každý
\emph{odvozený booleovský atribut} je booleovský atribut.
\end{booleanattributedef}
Dále GUHA pracuje s pojmem \emph{dílèí booleovský atribut}, kterým oznaèuje
booleovské atributy, které vystupují jako operandy v konjunkcích a disjunkcích
booleovských atributù.
\paragraph{}
Základní booleovský atribut $A(\alpha)$ nabývá hodnoty \emph{true} na øádku
\emph{o} matice \emph{M}, pokud $\emph{a}\in\alpha$, kde \emph{a} je hodnota
atributu \emph{a} na øádku \emph{o} -- dle odstavce 2 v \cite{guha}.
Hodnota odvozených booleovských atributù se definuje obvyklým zpùsobem
dle následující tabulky:
\begin{table}[!h]
\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
$\phi$ & $\psi$ & $\phi \wedge \psi$ & $\phi \vee \psi$ & $\neg\phi$ \\
\hline
true & true & true & true & false \\
\hline
true & false & false & true & false \\
\hline
false & true & false & true & true \\
\hline
false & false & false & false & true \\
\hline
\end{tabular}
\end{center}
\caption{Hodnoty odvozených boolských atributù}
\end{table}
\paragraph{}
Hodnota booleovského atributu $\phi$ v øádku o matice \emph{M} se znaèí
$\phi(o,\emph{M})$. Platí, že $\phi(o,\emph{M})=true$, pokud $\phi$ je pravdivý
na øádku \emph{o} matice \emph{M}, jinak $\phi(o,\emph{M})=false$.


\subsection{Zadání množiny relevantních otázek}
Podrobné možnosti nastavení jednotlivých složek zadání
booleovského atributu jsou popsány T.Karbanem v \cite{relminer}
a implementovány do prostøedí Ferda DataMiner T.Kuchaøem v \cite{kuchar}.
V prostøedí Ferda DataMiner byly v rámci diplomové práce \cite{kuchar}
naimplementovány krabièky, pomocí kterých 
lze zadávat základní booleovské atributy, jejich negaci, konjunkci a disjunkci.
U tìch lze zadávat typ koeficientu, dùležitost, u konjunkce a disjunkce navíc
tøídy ekvivalence a délku. Podrobný popis zadávání množiny relevantních otázek
je uveden v práci T.Kuchaøe \cite{kuchar}. Zde pouze uvedeme, že
možnosti zadávání množiny relevantních otázek v prostøedí Ferda byly rozšíøeny
ve srovnání s možnostmi v LISp-Mineru.

\subsection{Kategoriální atributy}
S kategoriálními atributy pracují nìkteré dataminigové procedury. Více o použití
kategoriálních atributù se lze doèíst v \ref{miners}.


\section{Dataminingové procedury}
Zde popíšeme dataminingové procedury 4ft-Miner a SD4ft-Miner, protože v dané diplomové práci
byly implementována relaèní rozšíøení právì tìchto dvou procedur. Další
implementované procedury jsou KL-Miner, CF-Miner, SD4CF-Miner, SD4KL-Miner,
a procedura strojového uèení KEX. Tyto procedury jsou implementovány
v prostøedí LISp-Miner a taktéž v prostøedí Ferda DataMiner (kromì
procedury KEX).
\label{miners}
\subsection{4ft-Miner}
4ft-Miner je
dataminingová procedura, která hledá právì vztahy tvaru $Ant \approx Succ / Cond$.
$Ant$, $Succ$, a $Cond$ jsou zde booleovské atributy odvozené ze sloupcù
 vstupní datové matice. Intuitivní význam vztahu $Ant \approx Succ / Cond$
je ten, že atributy $Ant$ a $Succ$ jsou ve vztahu daném $\approx$, je-li splnìna
podmínka zadaná booleovským atributem $Cond$ na analyzované datové matici.

\subsection{SD4ft-Miner}
SD4ft-Miner je
dataminingová procedura, která hledá právì vztahy tvaru $Ant \approx Succ / 
(\alpha, \beta, Cond)$.
$Ant$, $Succ$, $\alpha$, $\beta$ a $Cond$ jsou zde booleovské atributy odvozené ze sloupcù
 vstupní datové matice. Intuitivní význam vztahu $Ant \approx Succ / (\alpha, \beta, Cond)$
je ten, že vztah daný $\approx$ atributù $Ant$ a $Succ$ na množinì $\alpha$ se liší od vztahu
$Ant$ a $Succ$ na množinì $\beta$, je-li splnìna podmínka zadaná booleovským
 atributem $Cond$ na analyzované datové matici.


\section{Dùležité rysy implementace metody GUHA}

\subsection{Princip bitových øetízkù}
\label{bitstrings}

\paragraph{}
Typická efektivní realizace GUHA procedury používá ''vertikální'' reprezentaci
databáze, kde každá hodnota každého atributu je reprezentována øetìzcem bitù
(viz. kapitola \ref{bitstrings}). Každý bit v øetìzci popisuje jeden objekt.
Bit 1 reprezentuje ''objekt má tuto hodnotu'', zatímco bit 0 znamená
''objekt nemá tuto hodnotu''.
\paragraph{}
Bitový øetìzec mùžeme chápat jako bitmapový index databáze. Pøi klasické
implementaci atributù se bitové øetízky vytváøejí pøi prvním prùchodu daty
a poté není tøeba k tìmto datù pøistupovat. Zde vyvstává otázka, jak efektivnì
uchovávat potøebné bitové øetízky v pamìti. Toto bylo vyøešeno v rámci diplomové
práce T.Kuchaøe \cite{kuchar} pomocí cache bitových øetízkù.
\paragraph{}
Pøi implementaci relaèního rozšíøení pro existující dataminingové procedury
se tento princip modifikoval z dùvodù toho, že virtuální atributy nejsou
vytváøeny pøímo ze sloupcù datové matice, ale za bìhu -- podrobnìji pojem
virtuálního atributu je rozebrán v kapitole \ref{vattributes}.
\paragraph{}
Jako ukázku použijeme následující datovou tabulku.
\begin{table}[!h]
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
ID & A & B \\
\hline
1 & 1 & 1 \\
\hline
2 & 2 & 2 \\
\hline
3 & 1 & 3 \\
\hline
4 & 1 & 1 \\
\hline
5 & 2 & 3 \\
\hline
6 & 2 & 3 \\
\hline
\end{tabular}
\end{center}
\caption{Vzorová datová matice}
\end{table}

\paragraph{}
Bitový øetìzec $A(\alpha)$ má hodnotu 1 na pozici $i$ právì tehdy, když objekt 
s ID $i$ má hodnotu $\alpha$ ve sloupci $A$, jinak má bitový øetìzec 
na pozici $i$ hodnotu 0.
Bitové øetìzce základních booleovských a booleovských atributù
mohou vypadat následovnì. 
\begin{table}[!h]
\begin{center}
\begin{tabular}{*{7}{|c}|}
\hline
 & \multicolumn{2}{|c|}{Atributy} 
 & \multicolumn{2}{|c|}{Základní booleovské atributy} 
 & \multicolumn{2}{|c|}{Booleovské atributy}
   \\
\hline
$ID$ & $A$ & $B$ &$A(1)$ & $B(1,2)$ & $A(1)\wedge B(1,2)$ & $\neg B(1,2)$ \\
\hline
1 & 1 & 1 & 1 & 1 & 1 & 0 \\
\hline
2 & 2 & 2 & 0 & 1 & 0 & 0 \\
\hline
3 & 1 & 3 & 1 & 0 & 0 & 1 \\
\hline
4 & 1 & 1 & 1 & 1 & 1 & 0 \\
\hline
5 & 2 & 3 & 0 & 0 & 0 & 1 \\
\hline
6 & 2 & 3 & 0 & 0 & 0 & 1 \\
\hline
\end{tabular}
\end{center}
\caption{Bitové øetìzce atributù}
\end{table}

\subsection{Zadání úlohy}
Metoda GUHA pracuje s kategoriálními daty.
Smyslem zadání úlohy je zejména urèení zpùsobu kategorizace tak, aby byl
co nejvhodnìjší a nejrelevantnìjší jak vzhledem k požadované úloze ke zpracování,
tak i ke zkoumaným datùm.
Bude následovat popis práce s nìkterými parametry zadání úlohy v prostøedí Ferda DataMiner.
Vìtšina následujícího popisu se vztahuje i na systém LISp-Miner.
\subsubsection{Datový zdroj}
GUHA pracuje s daty z datových matic. Ty jsou získávány pøevážnì jako databázové
tabulky èi výsledky operací nad nimi z databází. Pro tento úèel je nutné 
pøi zadávaní úlohy definovat datový zdroj (momentálnì nejèastìji ve formì
pøípojení k databázi pøes rozhraní ODBC) a alespoò jednu datovou matici.
V relaèním rozšíøení dataminigových procedur GUHA se pracuje nad více tabulkami,
které jsou mezi sebou ve vztahu 1:N. Pro pohodlí se o nich zmiòujeme jako
o hlavní (master) a vedlejších (detail) tabulkách.
\paragraph{}
Dále se z datových matic vybírají datové sloupce, ze kterých se budou vytváøet
atributy obsahující kategorie pro potøebné rozdìlení vstupních dat. Data mohou
patøit do rùzných datových typù. Tyto dále ovlivní možnosti kategorizace.
Stojí za zmínku, že zatím nejkomplexnìjší implementace práce s jednotlivými
sémantickými typy byla realizována v práci \cite{kuchar} -- "Experimentální
GUHA procedury".
\subsubsection{Datová sémantika}
Z pohledu datové sémantiky se mohou vyskytovat tyto ètyøi druhy dat:

\label{datasemantics}
\begin{description}
\item[Nominální data] Hodnoty nejsou vzájemnì porovnatelné, napøíklad,
pohlaví nebo oblíbená pøíchu zmrzliny.
\item[Ordinální data] Hodnoty jsou vzájemnì porovnatelné, napøíklad, výše
dosaženého vzdìlání.
\item[Cyklická ordinální data] U tohoto sémantického typu se vychází ze
zkuše\-nosti, že pøi zadá\-vaní koeficientu typu \emph{cyklické intervaly}
(viz \ref{coefficients}) si èasto nevysta\-èíme pouze s ordinál\-ními daty.
Potøebujeme další vlastnost a to, aby první kategorie pøirozenì ná\-sledo\-vala
po poslední. Jako pøíklad mohou po\-sloužit dny v týdnu nebo mìsíce v roce.
\item[Kardinální data] Tato data jsou reprezentována èíselnými typy,
napøíklad, reálnými èísly. Jako pøíklad lze zvolit výši pøíjmu,
vzdalenost od místa bydlištì, výši krevního tlaku a podobnì.
\end{description}


\subsubsection{Kategorie}
Metoda GUHA pracuje s diskrétními daty. Data, která
tuto podmínku nesplòují, musí být diskretizována. Diskretizovaný sloupec
se oznaèuje jako atribut a jeho hodnoty jsou kategorie..
\paragraph{}
Možnosti práce s kategoriemi se postupnì vyvíjely v implementacích metody GUHA. Kategorie
mùže být dvojího typu: buï intervalová -- obsahuje koneèný poèet intervalù,
který pokrývá zkoumanou množinu dat, anebo výètová, kde výèet opìt pokrývá
zkoumanou množinu dat. V systémech LISp-Miner a Rel-Miner kategorie
mùže obsahovat buï jenom intervaly anebo jenom výèet. Až v rámci diplomové
práce \cite{kuchar} možnosti zadávání kategorie byly pøi\-rozenì rozšíøeny a imple\-mentovány
do systému Ferda DataMiner tak, aby mohla obsahovat jak intervaly, tak i výèet.
Kategorie tedy obsahuje hodnoty, které jsou pokryty sjednocením výètu
a intervalù v kategorii. Podmínkou pro možnost vytváøení intervalù v kategorii
je práce nad daty, které mají sémantický typ ordinální, cyklický ordinální
nebo kardinální (viz \ref{datasemantics}).
\paragraph{}
V rámci diplomové práce \cite{kuchar} byly vytvoøeny prostøedky pro práci
s atributy a kategorii, avšak pro uživatelskou práci byl z dùvodu pracnosti
implementován pouze krabièka pro transformaci atributu ''Each value one category'', která, jak plyne
z názvu, umí vytvoøit ze zkoumaného datového sloupce atribut obsahující
výètové kategorie pro každou hodnotu ve sloupci.
\paragraph{}
Krabièky pro atributy ''Ekvidistanèní intervaly'' a ''Ekvifrekvenèní intervaly'' ve formì
krabièek pro uživatelskou práci v systému Ferda DataMiner byly implemen\-továny
autorem této diplomové práce, jedná se o pøínos autora. Taktéž byla autorem
implen\-tována krabièka ''Statický atribut'', která umožòuje pøímou úpravu
atributu, vèetnì editace výètu a intervalù u jednotlivých kategorii.
\paragraph{}
Výše uvedené krabièky pro transformaci atributu byly pøítomny v první verzi
Ferdy, avšak diplomová práce T.Kuchaøe ''Experimentální procedury'' podstatnì zmìnila
práci se zadáváním úlohy pro procedury GUHA, proto se krabièky musely implementovat znovu.

\subsection{Generování relevantních otázek}
Následující odstavec naznaèuje zpùsob generování relevantních
otázek. Podrobnìji se s principem generování lze seznámit v disertaèní práci
T.Karbana \cite{relminer}, pro konkrétní implementaci v prostøedí 
Ferda DataMiner v diplomové práci T.Kuchaøe \cite{kuchar} a taktéž
v \cite{guha}.
\paragraph{}
Dataminingové procedury GUHA generují relevantní otázky na základì vstupní
datové matice a zadaných parametrù úlohy, které poté ovìøují na datech
z datové matice. Relevantní otázky, které jsou pøi ovìøení na vstupních
datech pravdivé, se nazývají hypotézy a posílají se na výstup.
\paragraph{}
Na následujícím pseudokódu lze nahlédnout na zpùsob generování relevantních
otázek u dataminingové procedury 4ft-Miner.

\begin{verbatim}
foreach(BitString condition in Conditions)
{
    foreach(BitString antecedent in Antecedents)
    {
        foreach(BitString succedent in Succedents)
        {
            ContingencyTable table = 
                ComputeTable(succedent, antecedent, condition);
            if (VerifyQuantifiers(table))
                result.Add(succedent, antecedent, condition);
        }
    }
}

\end{verbatim}

Objekty \verb+Antecedents+, \verb+Succedents+ a \verb+Conditions+ jsou
iterátory bitových øetìzcù umožòující prùchod pøes všechny možné hodnoty
zadání booleovských atributù. Ústøední implementaèní úlohou autora dané
diplomové práce byla právì implementace iterátoru bitových øetìzcù, který by
poskytoval bitové øetízky odpovídající virtuálním atributùm.
\subsection{Generování booleovských atributù}
Zde pouze struènì naznaèíme zpùsob generování booleovských atributù a
poznamenejme, že tento zpùsob užívaný metodou GUHA se podstatnì liší
od zpùsobu, který používá algoritmus APRIORI popsaného v \cite{aggraval}.
Zpùsob generování naznaèuje obrázek \ref{fig:boolattrgen}.

\begin{figure}[!h]
\begin{center}
\includegraphics[width=8cm]{pics/battr.eps}
\end{center}

\caption{Generování booleovských attributù}
\label{fig:boolattrgen}
\end{figure}
Podrobný popis generování booleovských atributù v prostøedí Ferda DataMiner
je uveden v \cite{kuchar}

\section{Relaèní asociaèní pravidla a virtuální atributy}
\subsection{Úvod}
Zde bude krátce popsáno rozšíøení asociaèních pravidel pro práci s vícero datovými
tabulkami takové, aby byly zachovány všechny vlastnosti metody GUHA a zároveò
aby se umožnil popis zajímavých vzorcù nalazených na více datových tabulkách.
Vlastnosti metody GUHA, zejména zadávání úlohy pro datamining a implementace
pomocí práce s bitovými øetízky zùstanou zachovány. Pro podrobnìjší popis
teorie rozšíøení metody GUHA o pravidla pro relaèní datamining doporuèujeme
prostudovat \cite{relminer}. Protože cílem dané diplomové práce je konkrétní
implementace postupu relaèního dataminingu, zde se zamìøíme pouze na nìkteré
nejdùležitìjší aspekty kritické pro pochopení implementace v rámci prostøedí
Ferda.
\subsection{Virtuální atributy}
\label{vattributes}
Asociaèní pravidla se rozšíøí o možnost práce s více datovými tabulkami.
Datová matice, která byla zkoumána pomocí pùvodních asociaèních pravidel, 
bude hlavní. Další datové tabulky budou rozšíøením hlavní tabulky o nìjaký atribut
a mohou být obecnì ve vztahu 1:N ke hlavní datové matici. 
\paragraph{}
Jako pøíklad mùže
posloužit databáze klientù banky, kde v hlavní tabulce máme uloženy osobní
údaje klientù a napøíklad v tabulce transakce jsou uloženy transakce pro úèty
klientù. Dalším pøíkladem je databáze pacientù, kde v rozšíøující tabulce jsou
uložená mìøení krevního tlaku pro jednotlivé pacienty.
\paragraph{}
Základním pojmem, o který se rozšíøí pùvodní asociaèní pravidla, je
\emph{vir\-tuální atribut}. Virtuální atributy jsou novì pøidané sloupce
k analyzované datové matici. Tyto sloupce se do pùvodní datové matice zpìtnì
neukládají, avšak dolování dat probíhá, jakoby tyto novì vytvoøené sloupce
v pùvodní matici byly -- vytváøejí se (nebo v pøípadì konkrétní implementace
v rámci dané diplomové práce se vytváøí pouze jejich reprezentace za pomocí
bitových øetízkù) za bìhu.
\paragraph{}
Pro názornost uveïme nìkolik pøíkladù virtuálních atributù. Použijeme
databázi klientù fiktivní banky Barbora, kde hlavní tabulka obsahuje
základní data o klientech a tabulka transakcí obsahuje pohyb na jejich úètech.
Zkoumejme následující hypotézu:
\begin{eqnarray}
\label{eq:aggrattributeexample}
TYPE="VKLAD" \& AMOUNT > AVG(AMOUNT)*2 \nonumber\\
\Rightarrow_{80\%} OPERATION="PREVOD NA UCET"
\end{eqnarray}
Zde jsme použili jeden virtuální atribut $AVG(AMOUNT)*2$, kde $AVG$ je
agregaèní funkce SQL. Hypotéza mùže znamenat zjednodušenì øeèeno,
pøedpoklad o faktu, že vyšší pøísuny penìz na úèet probíhají spíše
bezhotovostnì. Tato hypotéza mùže a nemusí mít smysl -- autor neaspiruje
na odborníka v oblasti bankovnictví.
Uvažme další hypotézu:
\begin{eqnarray}
\label{eq:hyprattributeexample}
VYSOKEINKASO \& SALARY(>15000) \& BYDLISTE="Praha"  \nonumber\\
\Rightarrow_{80\%} STATUSUVERU="Dobry"
\end{eqnarray}
Hypotéza tvrdí, že klienti, kteøí mají vyšší plat a platí vysoké inkaso
v okrese Praha, mají z 80\% dobré úvìry.
Zde jsme použili jeden virtuální atribut $VYSOKEINKASO$ , který
mùže vypadat následovnì:
\begin{eqnarray}
\label{eq:hyprattributeexample1}
TYPE="INKASO"  \Rightarrow_{90\%} \nonumber\\
AMOUNT > 5000
\end{eqnarray}
Jinými slovy, pokud typ transakce je INKASO, je z 90\% vysoké.
\paragraph{}
Zde data s informacemi o klientech a data s informacemi o jejich transakcích
jsou dvì samostatné datové matice.
\paragraph{}
Z výše uvedeného lze vidìt, jak rozdìlujeme virtuální atributy. Uvažujeme
dva základní druhy, jak jsou chápany
v \cite{relminer}. Oba druhy atributù jsou v rámci dané práce implementovány
do prostøedí Ferda.
\paragraph{}
První skupinou jsou sloupce vzniklé jako výsledek pøedzpracování dat z databáze.
Jmenují se agregaèní atributy. Druhou skupinou jsou virtuální atributy vzniklé
jako výsledek bìhu nìkteré z dataminingových úloh -- konkrétnì napøíklad mùžeme
použít míru platnosti hypotéz pro jednotlivé záznamy v hlavní tabulce jako
nový datový sloupec.
\subsubsection{Agregaèní atributy}
Agregaèní atribut se reprezentuje novým virtuálním sloupcem (který se
kvùli samotné podstatì principu virtuálního atributu neukládá do databáze),
Ten vzniká jako výsledek funkce nad daty z více datových tabulek, pøièemž
zmínìná funkce pøiøadí každému objektu v hlavní datové matici reálné èíslo
vypoèítané na základì hodnot v odpovídajících sloupcích z vedlejších datových 
matic.
\paragraph{}
Jako pøíklady takto uvažovaných funkcí mùže posloužit mimo jiné
množina SQL agregaèních funkcí, která vyhovuje výše uvedené definici. Dále mùžeme
uvažovat množinu obecnìjších funkci zpracovávajících data z vedlejších
datových tabulek. Pøíklad implementace takových funkcí mùžeme naleznout v
\cite{duchacek} -- jedná se o implementaci ve formì skriptu napsaného
v jazyce C\# interpretovaného
pøímo za bìhu. Takto lze implementovat i obecnìjší agregaèní atributy než
pouze za použití SQL agregaèních funkcí.

\subsubsection{Hypotézové atributy}
\label{hypattr}
Na rozdíl od agregaèních atributù, hypotézové atributy nelze získat za pomocí
agregaèních funkcí nad daty z hlavní a vedlej\-ších datových tabulek. Tyto 
atributy vznikají jako výsledek bìhu data\-miningových úloh nad vedlejšími
datovými tabulkami a dále se používají pøi bìhu dataminingových úloh nad
hlavní datovou tabulkou. Ústøední myšlenkou je zavést definici atributu
se sémantikou hypotézy (ve smyslu metody GUHA), jehož hodnotou by byla konkrétnì
síla nebo platnost hypotézy nad vedlejšími datovými tabulkami a takto
nadefinovaný sloupec by se použil "o úroveò výše" -- pro generaci hypotéz
pøi bìhu další dataminingové úlohy.
\paragraph{}
Uvedli jsme pøíklad \ref{eq:hyprattributeexample}. Na základì platnosti hypotézy
$VYSOKEINKASO$ mùžeme rozdìlit množinu klientù a zkoumat další souvislosti
pouze na té podmnožinì klientù, kde platí hypotéza $VYSOKEINKASO$. Uvažujeme-li
platnost hypotézy $VYSOKEINKASO$ jako (virtuální) atribut, mùžeme ho zapojit
do zadání nové úlohy napøíklad pro 4ft miner jako antecedent nebo sukcedent.
Je-li atribut zapojen jako antecedent, omezuje množinu zkoumaných objektù
na ty, pro které daná hypotéza z virtuálního atributu platí a zy dále zkoumá.
Zaøadíme-li tento atribut do sukcedentu, úloha bude spoèívat v nalezení pøed\-pokladu
pro platnost hypotéz z virtuálního atributu.
\paragraph{}
Z pøíkladu \ref{eq:hyprattributeexample} vyplývá, že zadání virtuálního
atributu je vlastnì výsledkem bìhu dataminingové úlohy nad vedlej\-ší datovou
matici. Tato úloha nad vedlejší datovou matici (budeme jí øíkat podúloha)
musí probìhnout vícekrát, vždy nad øádky z vedlejší matice, které se vztahují
ke hlavní matici. Jinými slovy, zkoumá-li hlavní dataminingová úloha objekty
hlavní datové matice po jednom (v našem pøíkladì klienty banky), potom podúloha
musí vracet hypotézy jen pro ty øádky vedlejší datové matice, které odpovídají
zkoumanému øádku v hlavní datové matici. Toto lze ilustrovat následujícím obrázkem:

\paragraph{}
\begin{figure}[!h]
\begin{center}
\includegraphics[width=8cm]{pics/master_detail.eps}
\end{center}
\caption{Master-detail tabulka}
\end{figure}

\paragraph{}
Výsledkem bìhu podúlohy je obvykle množina nových virtuálních sloupcù,
které jsou pøidány za bìhu k hlavní datové matici a hlavní dataminingová úloha
s nimi pracuje jako s ostatními sloupci.
\paragraph{}
Podíváme-li se na analogii s klasickým zadáním úlohy nad jednou datovou matici,
uvidíme, že je to v podstatì stejný princip. Výsledkem klasického zadání
je nìjaká množina relevantních otázek a ta se ovìøí nad datovou matici -- u každé otázky
se prozkoumá, zda platí pro zadaná data a pokud ano, je to hypotéza a jde do výsledku.
\paragraph{}
Stejnì to funguje i pro relevantní otázky z hypotézového atributu -- pro každý
objekt z hlavní datové matice se ovìøí, zda hypotéza pro nìj platí. Pokud ano,
do nového virtuálního sloupce pro tento objekt se pøidá hodnota $true$.
Také je možné virtuální atribut pojmout obecnìji a jako výstup neposkytovat
pouze pravdivostní hodnoty o platnosti hypotéze, ale napøíklad sílu
dané hypotézy, èímž dostaneme virtuální sloupec s reálnými hodnotami.
\subsubsection{Hypothesis space explosion}
Zvolíme-li jako druh koeficientu v zadání poúlohy napøíklad øezy (viz
\ref{coefficients}), poèet relevantních otázek se snadno znásobí, protože
se znásobí poèet možných cedentù. Toto vede ve výsledku ke generování
mnoha hypotéz v hlavní úloze, které mají hodnoty hypotézového atributu
velmi podobné mezi sebou. Výhodou je vìtší granularita úlohy a 
možnost nalezení nejpøesnìjšího zadání virtuálního atributu tak,
any platil na co nejvìtší podmnožinì zkoumaných dat. Nevýhodou je
generování velkého množství hypotéz, které øíkají skoro totéž.
\subsection{Omezení na hvìzdicové schéma}
V dané diplomové práci se autor rozhodl pro omezení akcep\-tovaného
data\-bázového schématu na hvìz\-dicový, kde máme pouze jednu
hlavní datovou matici (databázovou tabulku) a ved\-lejší datové
matice (tabulky), které jsou v relaci 1:N s hlavní data\-bázovou tabulkou.
Rovnìž je zakázána rekuze virtuálních atributù -- tj. nelze
hypotézový atribut zapojít opìt za hypotézový atribut.
\paragraph{}
Teoretické dùvody daných omezení jsou podrobnìji rozebrány v \cite{relminer}. Zde
se uvede krátké shrnutí z dùvodu lepšího porozumìní zpùsobu imple\-mentace,
který je popsán dále v dané diplomové práci, konkrétnì v kapitole \ref{implementation}.

\begin{description}
\item[Význam] takto generovaných hypotéz lze jen tìžko popsat v pøirozeném jazyce.
Obtížnì se interpretují závislosti nalezené na zkoumaných datech.
Autor dané práce se proto domnívá, že hypotézy vzniklé z úlohy obsahující rekurzivní
virtuální atributy sice mohou mít dobrý teoretický smysl, avšak vzhledem
k celkovému zamìøení prostøedí Ferda DataMiner na výuku dataminingu pro studenty
se nehodí do celkové koncepce tohoto prostøedí, aè mohou jsou v tomto
prostøedí implementovatelné a jsou pro nì autorem vytvoøeny programovací
prostøedky.
\item[Zobrazení] výsledkù úloh obsahujících rekurzivní virtuální atributy
se stává samo o sobì obtížným. Pro každou výslednou hypotézu se musí zobrazit
její atributy, které mohou být tvoøeny opìt hypotézami, které mají své atributy atd.
Tento dùvod souvisí s pøedchozím -- nejasný význam výsledkù vede k potížím jak
pøi interpretaci, tak i pøi pouhém zobrazení.
\item[Rychlost] zpracování úlohy s rekurzivnì zapojenými relaèními atributy
bude velmi rychle klesat. Podrobnìji se o tomto pojednává v \cite{relminer}.
Zde uvedeme pouze nástin problému.
\paragraph{}
Již pøi práci se systémem LISp-Miner se ukázalo, že
nevhodným nastavením úlohy pro datamining lze velmi lehce
meze použitelnosti takové úlohy ve smyslu doby poèítání.
Poèet vygenerovaných relevan\-tních otázek totiž závisí na mnoha nastaveních.
Jsou to nastavení délek cedentù, poètu kategorií v atributu, poètu atributù atd.
Nevhodné nastavení parametrù se mùže snadno znásobit díky velkému poètu
nastavovaných parametrù a doba výpoètu se stane neúnosnou.
\paragraph{}
V pøípadì virtuálních atributù je celkový poèet relevan\-tních otázek
potencionálnì podstatnì vyšší a to z dùvodu toho, že pro každou
relevantní otázku z podúlohy nad vedlejší datovou tabulkou vlastnì
vzníká nový virtuální sloupec v hlavní datové tabulce. Jak jsme vidìli
v \ref{hypattr}, i jednoduché zadání úlohy znamená generování velkého
poètu relevantních otázek (a tím i mnoha nových sloupcù),
což vede k problému pojmenovanému
"Hypothesis space explosion", jak o nìm pojednává T.Karban v \cite{relminer}.
Lze lehce nahlédnout, že i nerekur\-zivní zadání relaèního atributù s sebou
pøináší nebezpeèí toho,
že úloha snadno "uteèe" co se týèe poètu vygene\-rovaných relevan\-tních otázek
a tím i celkové doby bìhu. Navíc pøináší další problémy, o kterých
se podrobnì diskutuje v kapitole \ref{implementation}.
\end{description}
\paragraph{}
Z výše uvedených dùvodù
a dosavadních pokusù s funkèní implemen\-taci relaè\-ního roz\-šíøení dvou
minerù bylo rozhod\-nuto ponechat možnost rekur\-zivního zapojení
virtuál\-ních atributù pro budoucí vývoj.
\subsection{Jiné metody relaèního dataminingu}
Zde se pouze krátce zmíníme o existujících pøís\-tupech k data\-miningem
nad více tabulkami dat.
\paragraph{}
Významným zástupcem metod relaèního data\-miningu je metoda
WARMR. Detailní porovnání relaèního rozšíøení metody GUHA
a metody WARMR provádí T.Karban jako souèást své dizer\-taèní práce
\cite{relminer}.