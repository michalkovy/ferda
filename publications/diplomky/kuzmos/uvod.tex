\chapter{Úvod}
\paragraph{}
V této kapitole jsou uvedeny základní pojmy dobývání znalostí. Je popsána
metoda GUHA a jiné metody a jejich implementace. Podrobnìji je
uveden relaèní datamining. Také je zde pøedstaveno prostøedí
Ferda DataMiner, pro které probìhla implementace relaèních rozšíøení.
\label{uvod}
\section[Úvod do dobývání znalostí]{Úvod do dobývání znalostí z dat}

\subsection{Pøehled}
\paragraph{}
Data mining (DM) je analytická metodologie získávání
netriviálních skry\-tých a potenciálnì užiteèných informací z dat.
Nìkdy se chápe jako analytická souèást dobývání znalostí z databází
(Knowledge Discovery in Databases, KDD), jindy se tato dvì oznaèení chápou jako souznaèná.\footnotemark{}
V èeštinì se používá pojem \emph{dobývání}, \emph{získávání}, \emph{dolování} nebo \emph{vytìžování dat}.
\footnotetext{Definice je pøevzata z http://cs.wikipedia.org/wiki/Data\_mining}
Zde se budeme zabývat
nalezením vzorù nebo vztahù (z anglického slova \emph{patterns})
v podobì \emph{asociaèních pravidel}
(podrobnìji viz \ref{asociacnipravidla}).
\paragraph{}
Dobývání znalostí stojí na pomezí výpoèetních
statistických metod, databázových technologii a strojového uèení.
Metodami dobývání znalostí se dají øešit úlohy deskripce dat, sumarizace,
segmentace, deskripce konceptù, klasifikace, predikce a analýzy závislostí
v celé øadì aplikaèních oblastí.

\subsection{Metody dobývání znalostí}
\paragraph{}
Pøi dobývání znalostí z dat lze použít více metod. Dobrých výsledkù
lze dosáhnout pøi jejich kombinaci. Jako pøíklad mùžeme uvést statistické
procedury, rozhodovací stromy, neuronové sítì nebo asociaèní pravidla, se
kterými pracuje metoda GUHA a kte\-rý\-mi se zde budeme podrobnìji zabývat.

\subsection[Asociaèní pravidla ``nákupních košíkù'']{Asociaèní pravidla -- analýza nákupních košíkù}
\label{asociacnipravidla}
\paragraph{}
''Klasické'' asociaèní pravidlo je definováno Aggravalem (\cite{aggraval})
v souvislosti s analýzou nákupního košíku. Zde použijeme jeho popis, jak je uveden J.Rauchem
v \cite{skripta}.
\paragraph{}
Klasické asociaèní pravidlo je ve tvaru $X \to Y$, kde $X$ a $Y$ znaèí
dvì množiny prvkù. Toto pravidlo nám øíká, že transakce obsahující prvky z $X$,
mají tendenci obsahovat prvky z $Y$.
\paragraph{}
Analogie s nákupními košíky øíká, že
když nákupní koš obsahuje množinu pøedmìtù $X$, 
pravdìpodobnì bude obsahovat množinu pøedmìtù $Y$. Na\-pøík\-lad klienti, kteøí
nakoupí víno, èasto nakupují také sýry.
Každý z nákupních košíku $b_{1},\ldots, b_{n}$ tedy obsahuje
nìkteré z položek $P_{1},P_{2},\ldots,P_{K}$.
\begin{table}[!h]
\begin{center}
\begin{tabular}{|c|c|}
\hline
Nákupní košík & Položky \\
\hline
$b_{1}$ & $P_{1},P_{2},P_{3},P_{4},P_{5}$ \\
\hline
$b_{2}$ & $P_{2},P_{3},P_{4},P_{5},P_{K}$ \\
\hline
$b_{3}$ & $P_{1},P_{3},P_{12}$ \\
\hline
$b_{4}$ & $P_{1},P_{3}$ \\
\hline
\vdots & \vdots \\
\hline
$b_{n-1}$ & $P_{2},P_{4},P_{7},P_{7},P_{107}$ \\
\hline
$b_{n}$ & $P_{2},P_{4},P_{K}$ \\
\hline
\end{tabular}
\end{center}
\caption{Pøíklad množiny transakcí}
\end{table}
\paragraph{}
Výraz $P_{2}, P_{5} \to P_{1}, P_{3}$ je pøíklad asociaèního pravidla, které øíká, že
ná\-kup\-ní košíky obsahující položky $P_{2}$ a $P_{5}$, èasto obsahují i položky $P_{1}$ a $P_{3}$.
\paragraph{}
Používají se dvì míry intenzity asociaèního pravidla -- \emph{podpora (support)} a \emph{konfidence (confidence)}.
\emph{Podpora} asociaèního pravidla $X \to Y$ je podíl poètu transakcí obsahujících jak $X$, tak $Y$
k poètu všech transakcí. \emph{Konfidence} je podíl poètu transakcí obsahujících jak $X$, tak $Y$
k poètu transakcí obsahujících $X$.
\paragraph{}
Analýzou transakcí supermarkety mohou
optimalizovat rozmístìní zboží v prodejnì a zajistit rychlejší a výnosnìjší
prodej. Pro dobývání znalostí za využití takových pravidel byl navržen
algoritmus Apriori, viz \cite{aggraval}.
\subsection{GUHA}
\paragraph{}
GUHA je zkratka pro General Unary Hypotheses Automaton. Teoretický základ byl
formulován Hájkem v roce 1966 (podrobnìji viz \cite{guha66}),
detailnìji pak v \cite{guhabasic}.
Pro ilustraci práce metody GUHA uvádíme obrázek \ref{fig:praceguha}.
\paragraph{}
\begin{figure}[!h]
\begin{center}
\includegraphics[width=9cm]{pics/guha}
\end{center}
\caption{Práce metody GUHA}
\label{fig:praceguha}
\end{figure}
\paragraph{}
Metoda GUHA je realizována procedurami GUHA. Procedura je program, který na základì
vstupu, který je tvoøen analyzovanými daty a jednoduchým zadáním relevantních otázek,
generuje zadané otázky a ovìøuje je
oproti vstupním datùm. Výstupem jsou pak všechny relevantní otázky (také hypotézy), které jsou prosté.
Hypotéza je prostá, jestliže je pravdivá 
v analyzované datové matici a zároveò nevyplývá z jiných, jednodušších hypotéz.
\paragraph{}
Jednou z nejpoužívanìjších GUHA procedur je procedura ASSOC (podrobnìji v \cite{guhabasic}),
která hledá vztahy, jenž jsou zobecnìním ''klasických'' asociaèních pravidel definovaných Aggravalem v \cite{aggraval}.
Nejnovìjší implementací ASSOC je procedura 4FT, která je popsána dále v tomto textu.

\subsection{Relaèní dobývání znalostí}
\paragraph{}
Následující úvaha o relaèním dobývání znalostí byla pøevzata z disertaèní práce T.Karbana
uvedené v seznamu použité literatury jako \cite{relminer}.
\paragraph{}
Existující metody dobývání znalostí byly pøevážnì navrženy pro data ulo\-že\-na
v jedné datové matici (tzv. \emph{plochá reprezentace}). Pøi takové organizaci dat øádky datové
matice reprezentují pozorování (objekty studia, osoby, záznamy, pøedmìty apod.)
a sloupce datové matice reprezentují promìnné (vlastnosti, atributy nebo
charakteristiky). Aèkoliv takový pohled na zkoumaná data zjednoduší metody
používané pro dobývání znalostí, v praxi se velmi èasto vyskytují data ve složitìjší
reprezentaci, napøíklad, ve vícero datových maticích, které jsou mezi sebou
v relaci.
\paragraph{}
Je samozøejmì možné požadovaná data spojit do jedné datové matice, avšak takový úkon
je èasovì velmi nároèný a èasto se musí provést manuálnì pro každou úlohu, chceme-li
zkoumat napøíklad jiné atributy objektù z matice.
\paragraph{}
Nìkteré úlohy pro dobývání znalostí navíc nejdou jednoduše provést nad ''plochou''
reprezentaci, obzvláštì v pøípadì, kde uvažujeme mnoho rùzných objektù s jejich
vlastnostmi a vzájemnými vztahy. Cílem zavedení relaèního dataminingu je odstranìní
omezení na jednu tabulku dat a umožnìní dobývání znalostí z více relaènì
propojených datových tabulek. Navíc, jak uvádí T.Kar\-ban v \cite{dateso2005},
ponechání dat v relaèním tvaru mùže zachovat informace, které mohou být
vyjádøeny ve formì relaèních vztahù.

\section{Implementace metody GUHA}

\subsection{LISp-Miner}
\paragraph{}
Od roku 1996 se na pražské VŠE vyvíjí systém LISp-Miner.
Jak se uvádí na stránkách \verb+http://lispminer.vse.cz/+,
\begin{quote}
``LISp-Miner je akademický projekt pro podporu výzkumu a výuky dobývání znalostí z databází. Je vhodný zejména pro výuku studentù,
pilotní a støednì velké projekty KDD.''
\end{quote}
Výuka probíhá zejména na Fakultì informatiky a statistiky
Vysoké školy ekonomické v Praze a Matematicko-fyzikální fakultì Univerzity Karlovy
v Praze. LISp-Miner obsahuje implementaci nìkolika procedur pro dobývání znalostí spolu s moduly pro zadávání úlohy a prezentace výsledkù.
Vzhledem k dlouhé dobì vývoje prostøedí (již od roku 1996) znaènì vzrostla komplexnost celého prostøedí
z hlediska uživatelské práce -- každá dataminingová procedura se napøíklad skládá ze tøí modulù: pro zadání úlohy,
pro samotné generování a pro prohlížení výsledkù. Za jeden z nejvìtších nedostatkù systému LISp-Miner lze považovat i fakt,
že zadání úloh pro jednotlivé procedury lze sdílet mezi sebou pouze minimálnì -- v tom autor spatøuje jednu z velkých
výhod prostøedí Ferda DataMiner popsaného dále, z uživatelského hlediska. Na druhou stranu je tøeba øíct, že vzhledem k nejdelší historii
systému LISp-Miner procedury v nìm implementované jsou relativnì stabilní a odladìné a pøi jejich nových implementacích v jiných prostøedích pro dobývání znalostí
lze výsledky ze systému LISp-Miner považovat za vzorové.
Podrobné informace o systému LISp-Miner lze nalézt v \cite{guha}.
\subsection{Rel-Miner}
Systém Rel-Miner je softwarový projekt vznikající v rámci disertaèní práce (viz. \cite{relminer})
Mgr. Tomáše Karbana na Matematicko-fyzikální fakultì Univerzity Karlovy.
T.Karban uvádí jako cílech své práce následující:
\begin{itemize}
\item	rozšíøit jazyk asociaèních pravidel pro relaèní dobývání znalostí,
\item	implementovat systém Rel-Miner za použití bitových øetízkù,
\item	experimentovat s  relaèním dataminingem, zkoumat efektivitu a po\-uži\-tel\-nost,
\item	vytyèit možnosti dalšího vývoje.
\end{itemize}
\paragraph{}
Stávající implementace dataminingových procedur a parametrù zadávání úlohy,
které vznikly v rámci diplomové práce T.Kuchaøe, jsou v nìkterých ohledech inspirovány právì systémem Rel-Miner. Rovnìž
tato diplomová práce má nìkteré podobné cíle jako Rel-Miner.
\paragraph{}
Rozdíly jsou zejména ve vìtším teoretickém pøínosu projektu Rel-Miner, také v zamìøení
T.Karbana hlavnì na možnost distribuovanosti bìhu re\-laè\-ních i obecnì nerelaèních dataminingových
procedur. Podstatným rozdílem je zpùsob implementace: Rel-Miner byl od poèátku vyvíjen
jako samostatné softwarové dílo, které je zamìøeno na teoretické aspekty re\-laè\-ní\-ho
dobývání dat a implementace je spíše vzorová a obsahuje relaèní rozšíøení pouze procedury 4ft-Miner,
kdežto implementace relaèních rozšíøení v rámci této diplomové práce je zamìøená na práci
v prostøedí Ferda DataMiner, na využití veškerých jeho uživatelských i programátorských
výhod a již implementovaných prostøedkù. Mìla za cíl kromì dvou implementovaných procedur 
re\-laè\-ní tìžby dat položit základy pro snazší pøidávání re\-laè\-ních rozšíøení pro zbývající
 procedury v rámci systému Ferda DataMiner.
\paragraph{}
Rel-Miner mìl být prvotní implementací v oblasti relaèního dataminingu a principu bitových øetìzcù.
Momentálnì je projekt ve stádiu dokonèení, nicménì ještì není hotov a autorovi této práce není
známo, zda již existuje ve spustitelné podobì umožòující bìh relaèních dataminingových úloh.
Podobnì jako systém LISp-Miner je i systém Rel-Miner vytváøen pøedevším pro výzkumné úèely
a bude tedy vhodný pro malé a støednì velké projekty, pøedevším pak pro výuku studentù.
\subsection{Ferda DataMiner}
\label{ferdaproject}
\paragraph{}
Následuje popis prostøedí Ferda DataMiner, jak je uveden v èlánku \cite{ferda}.
\paragraph{}
Ferda DataMiner (\verb+http://sourceforge.net/projects/ferda+)
vznikl ja\-ko softwarový projekt na Matematicko-fyzikální fakultì Univerzity Karlovy.
Mìl odstranit nejvìtší nedostatky systému LISp-Miner zejména v oblasti modularity
a jednoduchosti uživatelské práce.
Pøedstavuje spoleèné vizuální prostøedí pro šestici
výše uvedených procedur systému LISp-Miner, pøináší vi\-zuál\-ní mo\-del postupu dobývání
znalostí podobný modelùm v komerèních systémech SPSS Clementine, SAS Enterprise Miner apod.
Srovnání s tìmito systémy je rovnìž uvedeno v \cite{ferda}.

\subsubsection{Krabièky}
\paragraph{}
Ferda pøináší pohled na zadání úlohy dobývání znalostí jako na zapsání funkce
pomocí jistých vizuálních objektu -- tzv. krabièek. Každá krabièka zastává také
roli funkce nebo nìkolika funkcí. Krabièky mají parametry a vyhodnocují své
funkce nad hodnotami tìchto parametrù. Parametrùm se u~krabièek øíká zásuvky.
Do zásuvek se zapojují jiné krabièky. Krabièky jsou rozdìleny podle typu a do
každé zásuvky lze zapojit pouze nìkteré typy krabièek.

Pomocí øady jednoduchých krabièek je uživateli umožnìno sestavovat vlastní
algoritmy. Ferda tedy rovnìž pøedstavuje nìco jako uživatelský programovací
jazyk. Na krabièky se lze však také dívat jako na konstrukce logiky èi
sémantiky, ke které existuje lambda-kategoriální gramatika. Pro ilustraci prostøedí
uvedeme obrazovku z prostøedí Ferda jako obrázek \ref{fig:ferdatutorial}.
\begin{figure}[!h]
\begin{center}
\includegraphics[width=15cm]{pics/ferda-tutorial}
\end{center}
\caption{Hlavní obrazovka prostøedí Ferda DataMiner}
\label{fig:ferdatutorial}
\end{figure}
\paragraph{}
Krabièkový model je považován za nejvìtší pøínos prostøedí Ferda DataMiner. Nová funkcionalita
se do prostøedí mùže pøidat ve formì krabièky zapojitelné mezi stávající krabièky. V této diplomové práci
autor implementuje metody uvedené v kapitole \ref{cile} ve formì krabièek, které se zapojují 
do stávajícího zadání úlohy.

\subsubsection{Základní programátorské rozdìlení prostøedí Ferda DataMiner}
\paragraph{}
Zde shrneme programátorské rozdìlení prostøedí Ferda DataMiner na jednotlivé èásti,
jak je uvedeno v dokumentu ''Implementace Ferda'', který je souèástí dokumentace studentského projektu
Ferda DataMiner.
\paragraph{}
Pro ilustraci uvedeme obrázek \ref{fig:ferdadesign} celkového programátorského návrhu prostøedí
Ferda DataMiner.
\begin{figure}[!h]
\begin{center}
\includegraphics[width=12cm]{pics/ferda-design}
\end{center}
\caption{Programátorský design prostøedí Ferda DataMiner}
\label{fig:ferdadesign}
\end{figure}
\begin{description}
\item	[Uživatelské rozhraní (FrontEnd)] má za úkol zprostøedkovávat funkce manažeru projektù uživateli a postarat se o pohodlnou a pøívìtivou práci s moduly.
\item	[Manažer projektù] má za úkol zprostøedkovávat funkce manažeru modulù, pøidat funkce nad moduly
dùležité pro projekt a zajistit funkce archivu, pohledù pracovní plochy a ukládání a naèítání stavu pracovní plochy do XML formátu.
\item	[Manažer modulù] má za úkol naèítání seznamu modulù z IceGridu, udr\-žo\-vá\-ní seznamu modulù, se kterými mùže pracovat a pøitom nejsou v IceGridu,
 vytváøení nových instancí krabièek za pomocí modulù krabièek, zprostøedkování funkcí jednotlivých modulù a nabízení jistých funkcí modulùm.
\item	[Moduly] mohou být nìkolika typù: \emph{moduly krabièek} –- moduly, které vy\-tvá\-øe\-jí instance, \emph{moduly pro nastavování nestandardních vlastností krabièek}
a jiné moduly pro komunikaci s uživatelem (tzv. \emph{moduly pro interakci}). Jedná se pøedevším o rùzné pomocné dialogy pracující vždy nad urèitými typy krabièek.
\item	[Add Ins] jsou pøídavné èásti FrontEndu, které s ním komunikují pøímo pøes CLI. Nejèastìji obsahuje moduly pro interakci èi moduly pro nastavování nestandardních vlastností. Není však nutné, aby napøíklad modul pro interakci byl souèástí nìjakého Add Inu.
\end{description}
Metoda pro statickou úpravu atributu v této práci byla naprogramována jako modul pro interakci s uživatelem.
\subsection{Diplomová práce ``Experimentální GUHA procedury''}
Zásadním pøínosem pro prostøedí Ferda DataMiner se stala diplomová práce T.Kuchaøe
``Experimentální GUHA procedury'', která pøinesla novou implementaci krabièek šesti
procedur pro dobývání znalostí a zobecnìní nìkterých prvkù zadání úlohy oproti jejich
stávající implementaci v systému LISp-Miner. 
\paragraph{}
Pøi implementaci relaèních rozšíøení procedur autor vycházel z jejich nové implementace
v rámci výše uvedené práce. 
Popis provázanosti se systémem Ferda DataMiner a konkrétnì
s novou implementaci dataminingových procedur od T.Kuchaøe v rámci jeho
diplomové práce \cite{kuchar} je souèástí popisu implementace a patøí
do kapitoly \ref{implementation}.


\section{Dùležité rysy metody GUHA}
\paragraph{}
Zde bude následovat struèný pøehled principù dobývání znalostí dle metody GUHA,
které jsou nezbytné k pochopení popisu samotné problematiky a implementace
zadání dané diplomové práce. Tyto principy jsou obecné a byly využity pøi implementaci
v systémech pro dobývání znalostí pracujících na principu
GUHA. Pro zevrubnìjší popis autor doporuèuje
prostudování zejména zdrojù \cite{guha} a \cite{kuchar}.

\subsection{Booleovské atributy}
\paragraph{}
Metoda GUHA pracuje s diskrétními daty. Data, která
tuto podmínku nesplòují, musí být diskretizována. Diskretizovaný sloupec,
který mùže nabývat koneènì mnoha hodnot, se oznaèuje jako \emph{atribut} a jeho hodnoty jsou \emph{kategorie}.
Na základì sloupcù analyzované matice dat vytváøíme \emph{booleovské atributy}.
Následuje definice booleovského atributu.

\newtheorem{booleanattributedef}{Definice booleovského atributu}
\begin{booleanattributedef}
Booleovský atribut je formule splòující následující podmínky.
\paragraph{}
Pokud \emph{A} je atribut a $\alpha$ je vlastní neprázdná podmnožina množiny
všech \emph{kategorií} atributu \emph{A}, pak $A(\alpha)$ je \emph{základní booleovský atribut}.
Každý základní booleovský atribut je booleovský atribut.
Pokud $\phi$ a $\psi$ jsou booleovské atributy, pak $\phi \wedge \psi$,
$\phi \vee \psi$ a $\neg\phi$ jsou odvozené booleovské atributy. Každý
\emph{odvozený booleovský atribut} je booleovský atribut.
\end{booleanattributedef}
Dále GUHA pracuje s pojmem \emph{dílèí booleovský atribut}, kterým oznaèuje
booleovské atributy, které vystupují jako operandy v konjunkcích a disjunkcích
booleovských atributù.
\paragraph{}
Základní booleovský atribut $A(\alpha)$ nabývá hodnoty \emph{true} na øádku
\emph{o} matice \emph{M}, pokud $\emph{a}\in\alpha$, kde \emph{a} je hodnota
atributu \emph{a} na øádku \emph{o} -- dle odstavce 2 v \cite{guha}.
Hodnota odvozených booleovských atributù se definuje obvyklým zpùsobem
dle následující tabulky:
\begin{table}[!h]
\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline
$\phi$ & $\psi$ & $\phi \wedge \psi$ & $\phi \vee \psi$ & $\neg\phi$ \\
\hline
true & true & true & true & false \\
\hline
true & false & false & true & false \\
\hline
false & true & false & true & true \\
\hline
false & false & false & false & true \\
\hline
\end{tabular}
\end{center}
\caption{Hodnoty odvozených booleovských atributù}
\end{table}
\paragraph{}
Hodnota booleovského atributu $\phi$ v øádku o matice \emph{M} se znaèí
$\phi(o,\emph{M})$. Platí, že $\phi(o,\emph{M})=true$, pokud $\phi$ je pravdivý
na øádku \emph{o} matice \emph{M}, jinak $\phi(o,\emph{M})=false$.

\subsection{Relevantní otázky}
\paragraph{}
Procedury metody GUHA hledají zajímavé vztahy na množinì dat z datové matice. Tyto vztahy (také relevantní otázky) jsou generovány ve formì zobecnìných
asociaèních pravidel. Zadání množiny relevantních otázek se pro procedury 4FT a SD4FT provádí pomocí booleovských atributù. 
Tvary asociaèních pravidel pro procedury 4FT a SDFT
jsou uvedeny v \ref{miners}.
\subsection{Zadání množiny relevantních otázek}
\paragraph{}
Podrobné možnosti nastavení jednotlivých složek zadání
booleovského atributu jsou popsány T.Karbanem v \cite{relminer}
a implementovány do prostøedí Ferda DataMiner T.Kuchaøem v \cite{kuchar}.
V prostøedí Ferda DataMiner byly v rámci diplomové práce \cite{kuchar}
implementovány krabièky, pomocí kterých 
lze zadávat booleovské atributy. Podrobný popis zadávání množiny relevantních otázek
je uveden v práci T.Kuchaøe \cite{kuchar}. Zde pouze uvedeme, že
možnosti zadávání množiny relevantních otázek v prostøedí Ferda byly rozšíøeny
ve srovnání s možnostmi v LISp-Mineru.

\section{Dataminingové procedury}
\paragraph{}
Zde popíšeme dataminingové procedury 4FT a SD4FT, protože v dané diplomové práci
byly implementována relaèní rozšíøení právì tìchto dvou procedur. Další
implementované procedury jsou KL, CF, SD4CF, SD4KL,
a procedura strojového uèení KEX. Tyto procedury jsou implementovány
v prostøedí LISp-Miner a taktéž v prostøedí Ferda DataMiner (kromì
procedury KEX). Dále jsou zde vysvìtleny pojmy \emph{kvantifikátor} a \emph{kontingenèní tabulka} pro proceduru 4FT. Pøesná znìní
jejich definic jsou pøevzaty z práce \cite{relminer} T.Karbana.
\label{miners}
\subsection{4FT}
\paragraph{}
4FT je
dataminingová procedura, která hledá právì vztahy tvaru $Ant \approx Succ$, pøípadnì $Ant \approx Succ / Cond$.
$Ant$, $Succ$, a $Cond$ jsou zde booleovské atributy odvozené ze sloupcù
vstupní datové matice. Výrazu $Ant \approx Succ$ se øíká \emph{asociaèní pravidlo},
výrazu $Ant \approx Succ / Cond$ se øíká \emph{podmínìné asociaèní pravidlo}. Intuitivní význam vztahu $Ant \approx Succ$ a $Ant \approx Succ / Cond$
je ten, že atributy $Ant$ a $Succ$ jsou ve vztahu daném $\approx$, pøípadnì je-li splnìna
podmínka zadaná booleovským atributem $Cond$ na analyzované datové matici.

\subsection{SD4FT}
\paragraph{}
SDFT je
dataminingová procedura, která hledá právì vztahy tvaru $Ant \approx Succ / 
(\alpha, \beta)$, pøípadnì $Ant \approx Succ / (\alpha, \beta, Cond)$.
$Ant$, $Succ$, $\alpha$, $\beta$ a $Cond$ jsou zde booleovské atributy odvozené ze sloupcù
 vstupní datové matice. 
 Výrazu $Ant \approx Succ / (\alpha, \beta)$ se øíká \emph{SDS asociaèní pravidlo},
výrazu $Ant \approx Succ / (\alpha, \beta, Cond)$ se øíká \emph{podmínìné SDS asociaèní pravidlo}.
 Intuitivní výz\-nam vztahu  $Ant \approx Succ / (\alpha, \beta)$ a $Ant \approx Succ / (\alpha, \beta, Cond)$
je ten, že vztah daný $\approx$ atributù $Ant$ a $Succ$ na množinì $\alpha$ se liší od vztahu
$Ant$ a $Succ$ na množinì $\beta$, pøípadnì je-li splnìna podmínka zadaná booleovským
 atributem $Cond$ na analyzované datové matici.


\subsection{Kontingenèní tabulka}
\paragraph{}
Pro verifikaci (podmínìných) asociaèních pravidel úloh procedury 4FT
je využívaná tzv. ètyøpolní kontingenèní tabulka (four fold contingency table, 
zkrácenì 4ft -- odtud název procedury 4FT). Ta zachycuje poèty 
(frekvence) objektù, které splòují antecedent i sukcedent, splòují pouze jeden,
pøípadnì ani jeden z nich.
Pro pevnì zvolený antecedent $\phi$, sukcedent $\psi$ a podmínku $\chi$
mùžeme spoèítat frekvence objektù v matici dat $M/\chi$
(matice dat splòujících podmínku $\chi$) splòujících antecedent, sukcedent, antecedent i sukcedent
nebo ani antecedent ani sukcedent. 
Frekvence tìchto objektù mùžeme reprezentovat ètyøpolní kontingenèní tabulkou.

\begin{table}[!h]
\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline
$M/\chi$ & $\psi$ & $\neg\psi$ & $\sum{}$\\
\hline
$\phi$ & $a$ & $b$ & $r$\\
\hline
$\neg\phi$ & $c$ & $d$ & $s$\\
\hline
$\sum{}$ & $k$ & $l$ & $n$\\
\hline
\end{tabular}
\end{center}
\caption{Ètyøpolní kontingenèní tabulka pro antecedent $\phi$, sukcedent $\psi$ a podmínku $\chi$ na matici dat $M$}
\label{tab:fourfoldtable}
\end{table}

V tabulce \ref{tab:fourfoldtable} je $a$ poèet objektù (øádkù) analyzované matice dat 
(splòu\-jí\-cích podmínku $\chi$) splòu\-jí\-cích jak antecedent, tak sukcedent, $b$ je poèet objektù
splòu\-jí\-cích antecedent a ne\-splòu\-jí\-cích sukcedent, $c$ je poèet objektù ne\-splòu\-jí\-cích antecedent
a splòujících sukcedent a $d$ je poèet objektù nesplòujících ani antecedent ani sukcedent. 
Poznamenejme, že $r=a+b$ znaèí poèet objektù splòujících antecedent, $s=c+d$ je poèet objektù,
které nesplòují antecedent. Souèty sloupcù $a+c=k$  resp. $b+d=l$ odpovídají poètu objektù, které splòují resp. nesplòují sukcedent. Navíc $n=r+s=k+l=a+b+c+d$ je poèet všech objektù v matici dat $M/\chi$.

\subsection{Kvantifikátory}
\paragraph{}
Symbol $\approx$ se nazývá 4ft-kvantifikátor. 4ft-kvantifikátory 
odpovídají podmínce na ètyøpolní tabulku. Na základì ètyøpolní tabulky se urèuje,
zda relevantní otázka je èi není relevantním tvrzením tj. hypotézou. 4ft-kvantifikátor pøi\-øa\-zu\-je
ètyøpolní tabulce $\langle a, b, c, d\rangle$ èíslo z množiny  $\{0, 1\}$.
Relevantní otázka $\phi \approx \psi / \chi$ je relevantním tvrzením právì tehdy, 
když  $\approx(a, b, c, d)=1$.
4ft-kvantifikátory mohou vyjadøovat rùzné vztahy, napøíklad implikaèní, ekvivalenèní,
mohou mít formu statistického testu atd. Jako pøíklad uvedeme 4ft kvantifikátor
\emph{fundované implikace}.
\paragraph{Fundovaná implikace}
\label{foundedimplication}
4ft-kvantifikátor $\Rightarrow_{p, Base}$ \emph{fundované implikace} pro 
$0<p\leq 1$ a $Base>0$: platí, že $\Rightarrow_{p, Base}(a,b,c,d)=1$ právì když
$\frac{a}{a+b}\geq p$ a $a\geq Base$.

Asociaèní pravidlo  $\phi \Rightarrow_{p, Base} \psi$ je pravdivé právì tehdy,
pokud je splnìna podmínka výše. Fundovaná implikace mùže být interpretována napøíklad takto:
''100\% zkoumaných objektù splòujících $\phi$ splòuje také $\psi$'' 
nebo ménì formálnì ''$\phi$ implikuje $\psi$ na 100\%''. 
Podmínka na $a$ zajišuje, že v datové matici $M$ (resp. $M/\chi$) je dostateèný poèet 
objektù splòujících  $\phi$ a $\psi$  (tedy že pravidlo má dostateènou podporu v datech matice $M$).


\section{Základy implementace metody GUHA}

\subsection{Princip bitových øetízkù}
\label{bitstrings}

\paragraph{}
Typická efektivní realizace GUHA procedury používá reprezentaci
databáze, kde každá hodnota každého atributu je reprezentována bitovým øe\-tíz\-kem
(viz. kapitola \ref{bitstrings}). Každý bit v øetìzci popisuje jeden objekt.
Bit 1 reprezentuje ''objekt má tuto hodnotu'', zatímco bit 0 znamená
''objekt nemá tuto hodnotu''.
\paragraph{}
Bitový øetízek mùžeme chápat jako bitmapový index databáze. Pøi klasické
implementaci atributù se bitové øetízky vytváøejí pøi prvním prùchodu daty
a poté není tøeba k tìmto datùm pøistupovat. Zde vyvstává otázka, jak efektivnì
uchovávat potøebné bitové øetízky v pamìti. Toto bylo vyøešeno v rámci diplomové
práce T.Kuchaøe \cite{kuchar} pomocí cache bitových øetízkù.
\paragraph{}
Pøi implementaci relaèního rozšíøení pro existující dataminingové proce\-du\-ry
se tento princip modifikoval z dùvodù toho, že virtuální atributy nejsou
vytváøeny pøímo ze sloupcù datové matice, ale za bìhu -- podrobnìji pojem
virtuálního atributu je rozebrán v kapitole \ref{vattributes}.
\paragraph{}
Jako ukázku použijeme pøíklad uvedený v práci T.Karbana \cite{relminer}.
\begin{table}[!h]
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
ID & A & B \\
\hline
1 & 1 & 1 \\
\hline
2 & 2 & 2 \\
\hline
3 & 1 & 3 \\
\hline
4 & 1 & 1 \\
\hline
5 & 2 & 3 \\
\hline
6 & 2 & 3 \\
\hline
\end{tabular}
\end{center}
\caption{Vzorová datová matice}
\end{table}

\paragraph{}
Bitový øetìzec $A(\alpha)$ má hodnotu 1 na pozici $i$ právì tehdy, když objekt 
s ID $i$ má hodnotu $\alpha$ ve sloupci $A$, jinak má bitový øetìzec 
na pozici $i$ hodnotu 0.
Bitové øetìzce základních booleovských a booleovských atributù
mohou vypadat následovnì. 
\begin{table}[!h]
\begin{center}
\begin{tabular}{*{7}{|c}|}
\hline
 & \multicolumn{2}{|c|}{Atributy} 
 & \multicolumn{2}{|c|}{Základní booleovské atributy} 
 & \multicolumn{2}{|c|}{Booleovské atributy}
   \\
\hline
$ID$ & $A$ & $B$ &$A(1)$ & $B(1,2)$ & $A(1)\wedge B(1,2)$ & $\neg B(1,2)$ \\
\hline
1 & 1 & 1 & 1 & 1 & 1 & 0 \\
\hline
2 & 2 & 2 & 0 & 1 & 0 & 0 \\
\hline
3 & 1 & 3 & 1 & 0 & 0 & 1 \\
\hline
4 & 1 & 1 & 1 & 1 & 1 & 0 \\
\hline
5 & 2 & 3 & 0 & 0 & 0 & 1 \\
\hline
6 & 2 & 3 & 0 & 0 & 0 & 1 \\
\hline
\end{tabular}
\end{center}
\caption{Bitové øetìzce atributù}
\end{table}

\subsection{Zadání úlohy}
\paragraph{}
Bude následovat popis práce s nìkterými parametry zadání úlohy v pro\-støe\-dí Ferda DataMiner.
Vìtšina následujícího popisu se vztahuje i na systém LISp-Miner.
\subsubsection{Datový zdroj}
\paragraph{}
GUHA pracuje s daty z datových matic. Ty jsou získávány pøevážnì jako databázové
tabulky èi výsledky operací nad nimi z databází. Pro tento úèel je nutné 
pøi zadávaní úlohy definovat datový zdroj (momentálnì nejèastìji ve formì
pøípojení k databázi pøes rozhraní ODBC) a alespoò jednu datovou matici.
V relaèním rozšíøení dataminingových procedur GUHA se pracuje s více tabulkami,
které jsou mezi sebou ve vztahu 1:N. Pro pohodlí se o nich zmiòujeme jako
o hlavní (master) a vedlejších (detail) tabulkách nebo maticích.
\paragraph{}
Dále se z datových matic vybírají datové sloupce, ze kterých se budou vytváøet
atributy obsahující kategorie pro potøebné rozdìlení vstupních dat. Data mohou
patøit do rùzných datových typù. Tyto dále ovlivní možnosti kategorizace.
Stojí za zmínku, že zatím nejkomplexnìjší implementace práce s jednotlivými
sémantickými typy byla realizována v práci \cite{kuchar} -- ''Experimentální
GUHA procedury''.
\subsubsection{Datová sémantika}
\paragraph{}
Z pohledu datové sémantiky se v prostøedí Ferda DataMiner rozlišují tyto ètyøi druhy dat:

\label{datasemantics}
\begin{description}
\item[Nominální data] Hodnoty nejsou vzájemnì porovnatelné, napøíklad
pohlaví nebo oblíbená pøíchu zmrzliny.
\item[Ordinální data] Hodnoty jsou vzájemnì porovnatelné, napøíklad výše
do\-saže\-né\-ho vzdìlání.
\item[Cyklická ordinální data] U tohoto sémantického typu se vychází ze
zkuše\-nos\-ti, že pøi zadávaní koeficientu typu \emph{cyklické intervaly}
si èasto nevystaèíme pouze s ordinálními daty.
Potøebujeme další vlastnost a to, aby první kategorie pøirozenì následovala
po poslední. Jako pøíklad mohou posloužit dny v týdnu nebo mìsíce v roce.
\item[Kardinální data] Tato data jsou reprezentována èíselnými typy,
napøíklad, reálnými èísly. Jako pøíklad lze zvolit výši pøíjmu,
vzdálenost od místa bydlištì, výši krevního tlaku a podobnì.
\end{description}


\subsubsection{Kategorie}
\paragraph{}
Možnosti práce s kategoriemi se postupnì vyvíjely v implementacích metody GUHA. Kategorie
mùže být dvojího typu: buï intervalová -- obsahuje koneèný poèet intervalù,
který pokrývá zkoumanou množinu dat, anebo výètová, kde výèet opìt pokrývá
zkoumanou množinu dat. V systémech LISp-Miner a Rel-Miner kategorie
mùže obsahovat buï jenom intervaly anebo jenom výèet. Až v rámci diplomové
práce \cite{kuchar} možnosti zadávání kategorie byly pøirozenì rozšíøeny a implementovány
do systému Ferda DataMiner tak, aby mohla obsahovat jak intervaly, tak i výèet.
Kategorie tedy obsahuje hodnoty, které jsou pokryty sjednocením výètu
a intervalù v kategorii. Podmínkou pro možnost vytváøení intervalù v kategorii
je práce nad daty, které mají sémantický typ ordinální, cyklický ordinální
nebo kardinální (viz \ref{datasemantics}).
\paragraph{}
V rámci diplomové práce T.Kuchaøe \cite{kuchar} byly vytvoøeny prostøedky pro práci
s atributy a kategorii, avšak pro uživatelskou práci byl z dùvodu pracnosti
implementována pouze krabièka pro transformaci atributu ''Each value one category'', která, jak plyne
z názvu, umí vytvoøit ze zkoumaného datového sloupce atribut obsahující
výètové kategorie pro každou hodnotu ve sloupci.
\paragraph{}
Krabièky pro atributy ''Ekvidistanèní intervaly'' a ''Ekvifrekvenèní intervaly'' ve formì
krabièek pro uživatelskou práci v systému Ferda DataMiner byly implementovány
autorem této diplomové práce, jedná se o pøínos autora. Taktéž byla autorem
implentována krabièka ''Statický atribut'', která umožòuje pøímou úpravu
atributu, vèetnì editace výètu a intervalù u jednotlivých kategorii.
\paragraph{}
Výše uvedené krabièky pro transformaci atributu byly pøítomny v první verzi
Ferdy, avšak diplomová práce T.Kuchaøe ''Experimentální procedury'' podstatnì zmìnila
práci se zadáváním úlohy pro procedury GUHA, proto se krabièky musely implementovat znovu.

\subsection{Generování booleovských atributù}
\paragraph{}
Zde pouze struènì naznaèíme zpùsob generování booleovských atributù a
poznamenejme, že tento zpùsob užívaný metodou GUHA se podstatnì liší
od zpùsobu, který používá algoritmus APRIORI popsaného v \cite{aggraval}.
Zpùsob generování naznaèuje obrázek \ref{fig:boolattrgen} pøevzatý z \cite{relminer}.

\begin{figure}[!h]
\begin{center}
\includegraphics[width=8cm]{pics/battr}
\end{center}

\caption{Generování booleovských attributù}
\label{fig:boolattrgen}
\end{figure}
Podrobný popis generování booleovských atributù v prostøedí Ferda DataMiner
je uveden v \cite{kuchar}.


\subsection{Ovìøování relevantních otázek}
\paragraph{}
Dataminingové procedury GUHA generují relevantní otázky na základì vstup\-ní
datové matice a zadaných parametrù úlohy, které poté ovìøují na datech
z datové matice. Relevantní otázky, které jsou pøi ovìøení na vstupních
datech pravdivé, se nazývají hypotézy a posílají se na výstup.
Podmínka platnosti relevantních otázek je dána kvantifikátory. 
Kvantifikátor odpovídá podmínce na kontingenèní tabulku.

\subsection{Generování relevantních otázek}
\paragraph{}
Následující odstavec naznaèuje zpùsob generování a verifikace relevantních
otázek. Podrobnìji se s principem generování lze seznámit v disertaèní práci
T.Karbana \cite{relminer}, pro konkrétní implementaci v prostøedí 
Ferda DataMiner v diplomové práci T.Kuchaøe \cite{kuchar} a taktéž
v \cite{guha}.


\paragraph{}
Na následujícím pseudokódu lze nahlédnout na zpùsob generování relevantních
otázek u dataminingové procedury 4ft-Miner.

\begin{verbatim}
foreach(BitString condition in Conditions)
{
    foreach(BitString antecedent in Antecedents)
    {
        foreach(BitString succedent in Succedents)
        {
            ContingencyTable table = 
                ComputeTable(succedent, antecedent, condition);
            if (VerifyQuantifiers(table))
                result.Add(succedent, antecedent, condition);
        }
    }
}
\end{verbatim}

Objekty \verb+Antecedents+, \verb+Succedents+ a \verb+Conditions+ jsou
iterátory bitových øetìzcù umožòující prùchod pøes všechny možné hodnoty
zadání booleovských atributù. Ústøední implementaèní úlohou autora dané
diplomové práce byla právì implementace iterátoru bitových øetìzcù, který by
poskytoval bitové øetízky odpovídající virtuálním atributùm.

\section{Relaèní asociaèní pravidla a virtuální atributy}
\subsection{Úvod}
\paragraph{}
Zde bude popsáno rozšíøení asociaèních pravidel pro práci s vícero datovými
tabulkami takové, aby byly zachovány všechny vlastnosti metody GUHA a zároveò
aby se umožnil popis zajímavých vztahù nalezených na více datových tabulkách.
Vlastnosti metody GUHA, zejména zadávání úlohy a implementace
pomocí práce s bitovými øetízky zùstanou zachovány. Pro podrobnìjší popis
teorie rozšíøení metody GUHA o pravidla pro relaèní dobývání dat autor doporuèuje
prostudovat \cite{relminer}. Protože cílem dané diplomové práce je konkrétní
implementace postupu relaèního dataminingu, zde se zamìøíme pouze na nìkteré
nejdùležitìjší aspekty kritické pro pochopení implementace v rámci prostøedí
Ferda.
\subsection{Virtuální atributy}
\paragraph{}
\label{vattributes}
Asociaèní pravidla se rozšíøí o možnost práce s více datovými tabulkami.
Datová matice, která byla zkoumána pomocí pùvodních asociaèních pravidel, 
bude hlavní. Další datové tabulky budou rozšíøením hlavní tabulky o nìjaký atribut
a mohou být obecnì ve vztahu 1:N ke hlavní datové matici. 
\paragraph{}
Jako pøíklad mùže
posloužit databáze klientù banky, kde v hlavní tabulce máme uloženy osobní
údaje klientù a napøíklad v tabulce transakce jsou uloženy transakce pro úèty
klientù. Dalším pøíkladem je databáze pacientù, kde v rozšíøující tabulce jsou
uložená mìøení krevního tlaku pro jednotlivé pacienty.
\paragraph{}
Základním pojmem, o který se rozšíøí pùvodní asociaèní pravidla, je
\emph{vir\-tuál\-ní atribut}. Virtuální atributy jsou novì pøidané sloupce
k analyzované datové matici. Tyto sloupce se do pùvodní datové matice zpìtnì
neukládají, avšak dolování dat probíhá, jakoby tyto novì vytvoøené sloupce
v pùvodní matici byly -- vytváøejí se (nebo v pøípadì konkrétní implementace
v rámci dané diplomové práce se vytváøí pouze jejich reprezentace za pomocí
bitových øetízkù) za bìhu.
\paragraph{}
Pro názornost uveïme nìkolik pøíkladù virtuálních atributù. Použijeme
databázi klientù fiktivní banky Barbora, kde hlavní tabulka obsahuje
základní data o klientech a tabulka transakcí obsahuje pohyb na jejich úètech
(použité tabulky jsou podrobnì popsány v kapitole \ref{tests}).
Pøedpokládejme, že nás zajímá typ operace v závislosti na výši transakce.
Zkoumejme následující asociaèní pravidlo:
\begin{eqnarray}
\label{eq:aggrattributeexample}
(TYPE="VKLAD") \& (AVGAMO{}UNT > 5000) \nonumber\\
\Rightarrow_{0,8;20} OPERATION="PREVOD NA{}UCET"
\end{eqnarray}
Typ transakce je VKLAD, jehož prùmìrná výše je vìtší než 5000.
$\Rightarrow_{0,8;20}$ znaèí kvantifikátor fundované implikace, jak je
uveden v \ref{foundedimplication}.
Zde jsme použili jeden virtuální atribut $AVGAM{O}UNT$, který je odvozený jako:

\begin{eqnarray}
AVG(amount)
\end{eqnarray}
 kde $AVG$ je
agregaèní funkce SQL. Hypotéza mùže znamenat zjednodušenì øeèeno
pøedpoklad o faktu, že vyšší pøísuny penìz na úèet probíhají spíše
bezhotovostnì. Tato hypotéza mùže a nemusí mít smysl -- autor neaspiruje
na odborníka v oblasti bankovnictví.
\paragraph{}
Dále mùžeme zkoumat status úvìru klientù v závislosti na nìjaké charakteristice plateb. Za platby mùžeme považovat transakce, které
mají uhradit nìjaké služby -- napøíklad inkaso apod. Lze pøedpokládat, že na status úvìru bude mít vliv, zda je klient
napøíklad ''šetrný'' nebo naopak ''rozhazovaèný''. Takové charakteristiky zkusíme zjistit na základì dat v matici transakcí.
Zde si mùžeme všimnout, že požadovaných výsledkù lze velmi tìžko dosáhnout za použití jedné matice dat -- ztratíme tím
možnost zkoumat zajímavé vztahy, které platí na vedlejší datové matici. Zkoumané charakteristiky nelze jednoduše pøidat do hlavní datové matice.
Uvažme další hypotézu:
\begin{eqnarray}
\label{eq:hyprattributeexample}
(VYSOKEINKASO) \& (SALARY(>15000)) \&   \nonumber\\
(BYDLISTE="Praha")\Rightarrow_{0,8;10} STATUSUVERU="Dobry"
\end{eqnarray}
Hypotéza tvrdí, že klienti, kteøí mají vyšší plat a platí vysoké inkaso (to je pøíklad výše zmínìné charakteristiky plateb)
v okrese Praha, mají z 80\% dobré úvìry.
Zde jsme použili jeden virtuální atribut $VYSOKEINKASO$ , který
mùže vypadat následovnì:
\begin{eqnarray}
\label{eq:hyprattributeexample1}
TYPE="INKASO"  \Rightarrow_{0,9;10} AMOUNT > 5000
\end{eqnarray}
Jinými slovy, pokud typ transakce je INKASO, je z 90\% vysoké.
\paragraph{}
Zde data s informacemi o klientech a data s informacemi o jejich transakcích
jsou dvì samostatné datové matice.
\paragraph{}
Výše uvedené pøíklady uvádí oba druhy virtuálních atributù, jak jsou chápány
v \cite{relminer}. Oba druhy atributù jsou v rámci dané práce implementovány
do prostøedí Ferda.
\paragraph{}
První skupinou jsou sloupce vzniklé jako výsledek pøed\-zpracování dat z databáze.
Jmenují se \emph{agregaèní atributy}. Druhou skupinou jsou virtuální atributy vzniklé
jako výsledek bìhu nìkteré z dataminingových úloh -- konkrétnì napøíklad mùžeme
použít míru platnosti hypotéz pro jednotlivé záznamy v hlavní tabulce jako
nový datový sloupec. Tìm øíkáme \emph{hypotézové atributy}. Navenek oba druhy atributu pracují s daty z vedlejší datové matice,
provádí na ní nìjaké transformace a jako výsledek vznikají nové ''virtuální'' sloupce
skládající se obecnì z reálných èísel,
které jsou pøidány do hlavní datové matice.
\subsubsection{Agregaèní atributy}
\paragraph{}
\emph{Agregaèní atribut} se reprezentuje novými virtuálními sloupci (které se
z definice virtuálního atributu neukládá do databáze),
Tyto sloupce vznikají jako výsledek pøedzpracování dat z více datových tabulek. 
Pro každý objekt z hlavní datové matice se pøiøadí reálné èíslo
vypoèítané na základì hodnot v odpovídajících sloupcích z vedlejších datových 
matic. Formálnìji lze agregaèní atribut definovat jako funkci nad relevantními sloupci
vedlejší datové matice, která vrací reálné èíslo.
\paragraph{}
Pøínosem agregaèního atributu je zjednodušení zadávání dataminingové úlohy. Výsledku,
který pøináší agregaèní atribut, lze dosáhnout i jinak -- napøíklad pøedzpracováním
dat pøed samotnou tìžbou dat, pøidáním po\-ža\-do\-va\-ných sloupcù do hlavní datové matice apod.
Agregaèní atribut umožòuje pružnì mìnit zadání úlohy -- zjistíme-li napøíklad
z výsledkù po dobìhnutí úlohy, že bychom potøebovali zmìnit zadání a zkoumat jiná data,
nemusíme ruènì vytváøet potøebné sloupce v hlavní datové matici (které navíc
budeme potøebovat pouze pro právì zpracovávanou úlohu a které se budou muset po dobìhnutí úlohy opìt smazat)
a místo toho zmìníme pouze zadání agregaèního atributu.
\paragraph{}
Jako pøíklady takto uvažovaných funkcí mùže posloužit mimo jiné
množina SQL agregaèních funkcí, která vyhovuje výše uvedené definici. Dále mùžeme
uvažovat množinu obecnìjších funkci zpracovávajících data z vedlejších
datových tabulek. Pøíklad implementace takových funkcí mùžeme naleznout v
\cite{duchacek} -- jedná se o implementaci ve formì skriptu napsaného
v jazyce C\# interpretovaného
pøímo za bìhu. Takto lze implementovat i obecnìjší agregaèní atributy než
pouze za použití SQL agregaèních funkcí.

\subsubsection{Hypotézové atributy}
\paragraph{}
\label{hypattr}
Na rozdíl od agregaèních atributù, \emph{hypotézové atributy} nelze získat za pomocí
pøedzpracování dat z hlavní a vedlejších datových tabulek. Tyto 
atributy vznikají jako výsledek bìhu dataminingových úloh nad vedlejšími
datovými tabulkami a dále se používají pøi bìhu dataminingových úloh nad
hlavní datovou tabulkou. Ústøední myšlenkou je zavést definici atributu
se sémantikou hypotézy (ve smyslu metody GUHA), jehož hodnotou by byla konkrétnì
síla nebo platnost hypotézy nad vedlejšími datovými tabulkami a takto
nadefinovaný sloupec by se použil ''o úroveò výše'' -- pro generaci hypotéz
pøi bìhu další dataminingové úlohy.
\paragraph{}
Uvedli jsme pøíklad \ref{eq:hyprattributeexample}. Na základì platnosti hypotézy
$VYSOKEINKASO$ mùžeme rozdìlit množinu klientù a zkoumat další souvislosti
pouze na té podmnožinì klientù, kde platí hypotéza $VYSOKEINKASO$. Uvažujeme-li
platnost hypotézy $VYSOKEINKASO$ jako (virtuální) atribut, mùžeme ho zapojit
do zadání nové úlohy napøíklad pro 4FT jako antecedent nebo sukcedent.
\paragraph{}
Z pøíkladu \ref{eq:hyprattributeexample} vyplývá, že zadání virtuálního
atributu je vlastnì výsledkem bìhu dataminingové úlohy nad vedlejší datovou
matici. Tato úloha nad vedlejší datovou matici (budeme jí øíkat podúloha)
musí probìhnout vícekrát, vždy pouze nad tìmi øádky z vedlejší matice, které se vztahují
ke zkoumanému objektu z hlavní matice. Toto lze ilustrovat obrázkem \ref{fig:master-client1}.

\paragraph{}
\begin{figure}[!h]
\begin{center}
\includegraphics[width=8cm]{pics/master_client1}
\end{center}
\caption{Master-detail tabulka}
\label{fig:master-client1}
\end{figure}

\paragraph{}
Zde podúloha probìhne nad transakcemi 1 a 2, výsledek (reálné èíslo) pøidá
do nového virtuálního sloupce na pozici pro klienta ABC. Dále podúloha probìhne znovu
nad transakcemi 3 a 4, pøidá na pozici pro klienta DEF další reálné èíslo a obdobným zpùsobem
pokraèuje pro zbytek matice.
\paragraph{}
Uvažujeme-li o podúloze jako napøíklad o proceduøe 4FT, víme, že ta generuje relevantní
otázky na základì zadání a ovìøuje na nich platnost zadaných kvantifikátorù oproti zkoumané
datové matici. Procedura 4FT vrací jako výstup pouze relevantní otázky, na kterých platí
takto zadané kvantifikátory.
\paragraph{}
Spustíme-li proceduru 4FT nad relevantními øádky vedlejší datové matice, dostaneme
jako výstup platné i neplatné relevantní otázky (uvažujme na chvíli, že 4FT
je takto jednoduše upraven). V pøípadì procedury 4FT mùžeme získat booleovský
vektor platností jednotlivých relevantních otázek,
obecnì procedury mohou vracet sílu platnosti jako reálné èíslo, dostaneme
tedy vektor reálných èísel. Po prozkoumání celé vedlejší datové matice získáme poèet
vektorù platnosti relevantních otázek rovný poètu øádkù v hlavní datové matici --
pro každého klienta prozkoumáme relevantní otázky generované podúlohou,
které platí na právì jeho transakcích. Poèet virtuálních sloupcù vygenerovaných virtuálním atributem
(podúlohou 4FT) je rov\-ný délce vektoru platnosti relevantních otázek. Chceme-li získat
$i$-tý vir\-tuál\-ní sloupec, vezmeme z každého vektoru hodnotu na $i$-té pozici.
Poèet vygenerovaných virtuálních sloupcù virtuálním atributem se bude rovnat poètu vygenerovaných
hypotéz podúlohou. 
Množina nových virtuálních sloupcù se pøidá za bìhu k hlavní datové matici a hlavní dataminingová úloha
s ní pracuje jako s ostatními sloupci.
\subsection{Nárùst složitosti výpoètu}
\paragraph{}
Z dosavadních zkušeností s prostøedím LISp-Miner a Ferda DataMiner víme, že
zkoumané úlohy èasto generují zajímavé vztahy v øádu tisícù. Z výše uvedeného
popisu získávání virtuálních sloupcù plyne, že pro každý zajímavý vztah vygenerovaný podúlohou
se do hlavní datové matice pøidá virtuální sloupec. Je vidìt, že pøi používání
hypotézového atributu v zadání úlohy pro dataminingovou proceduru lze velmi
lehce dosáhnout výrazného zesložitìní pùvodní úlohy a rychlému nárùstu velikosti
zkoumané datové matice. Tato skuteènost vede ke zpomalení bìhu úlohy a ke generování
velkého poètu hypotéz, které øíkají skoro totéž, protože mají velmi podobné hodnoty
hypotézového atributu. Výhodou je vìtší granularita úlohy a 
možnost nalezení nejpøesnìjšího zadání virtuálního atributu tak,
aby platil na co nejvìtší podmnožinì zkoumaných dat.
\subsection{Omezení na hvìzdicové schéma}
\paragraph{}
V dané diplomové práci se autor rozhodl pro omezení akcep\-tovaného
data\-bázového schématu na hvìz\-dicový, kde máme pouze jednu
hlavní datovou matici (databázovou tabulku) a ved\-lejší datové
matice (tabulky), které jsou v relaci 1:N s hlavní data\-bázovou tabulkou.
Rovnìž je zakázána rekurze virtuálních atributù -- tj. nelze
hypotézový atribut použít v zadání pro další hypotézový atribut.
\paragraph{}
Teoretické dùvody daných omezení jsou podrobnìji rozebrány v \cite{relminer}. Zde
se uvede krátké shrnutí z dùvodu lepšího porozumìní zpùsobu imple\-mentace,
který je popsán dále v dané diplomové práci, konkrétnì v kapitole \ref{implementation}.

\begin{description}
\item[Význam] hypotéz gene\-rovaných pomocí rekur\-zivních hypo\-tézových atri\-butù
lze jen tìžko pop\-sat v pøi\-rozeném jazy\-ce.
Obtížnì se interpretují zá\-vislosti na\-lezené na zkou\-maných datech.
Autor dané práce se proto domnívá, že hypo\-tézy vzniklé z úlohy obsahující rekur\-zivní
vir\-tuální atri\-buty sice mohou mít dobrý teore\-tický smysl, avšak vzhledem
k cel\-kovému zamìøení pro\-støedí Ferda DataMiner na výuku data\-miningu pro stu\-denty
se nehodí do celkové kon\-cepce tohoto prostøedí, aè jsou v tomto
prostøedí implemen\-tovatelné a jsou pro nì autorem vy\-tvoøeny programo\-vací
pro\-støedky.
\item[Zobrazení] výsledkù úloh obsahujících rekurzivní virtuální atributy
se stává samo o sobì obtížným. Pro každou výslednou hypotézu se musí zobrazit
její atributy, které mohou být tvoøeny opìt hypotézami, které mají své atributy atd.
Tento dùvod souvisí s pøedchozím -- ne\-jas\-ný výz\-nam výs\-led\-kù vede k potížim jak
pøi interpretaci, tak i pøi pouhém zobrazení.
\item[Rychlost] zpracování úlohy s rekur\-zivnì zapojenými relaè\-ními atri\-buty
bude velmi rychle klesat. Podrob\-nìji se o tomto po\-jednává v \cite{relminer}.
Z uvedeného zpù\-sobu genero\-vání virtuálních sloupcù je vidìt, že jejich poèet mùže být velký
a proto úloha nad hlavní matici se zpomalí. Pøed\-stavíme-li si, že použijeme v zadání
hypo\-tézového atributu další hypo\-tézový atribut, pak první pod\-úloha bude zkoumat vel\-ký poèet sloupcù
vy\-ge\-ne\-rova\-ných druhou podúlohou, a opìt vy\-generuje velký poèet rele\-vant\-ních otázek pro nadúlohu.
Když uvážíme možnost použití v zadání vícero virtuálních atributu, je vidìt, že složitost a doba
výpoètu znaènì stoupnou. Tento problém se nazývá
''Hypothesis space explosion'', jak o nìm pojednává T.Karban v \cite{relminer}.
\end{description}
\paragraph{}
Z výše uvedených dùvodù
a dosavadních pokusù s funkèní implemen\-taci relaè\-ního roz\-šíøení dvou
minerù bylo rozhod\-nuto ponechat možnost rekur\-zivního zapojení
virtuál\-ních atributù pro budoucí vývoj.
\subsection{Jiné metody relaèního dataminingu}
\paragraph{}
Zde se pouze krátce zmíníme o existujících pøís\-tupech k data\-miningem
nad více tabulkami dat.
\paragraph{}
Nejrozšíøenìjším metodou relaèního dobývání znalostí je metoda \emph{induktivního 
logického programování (ILP)}. Prin\-cip ILP mùže být pop\-sán ná\-sledovnì: z data\-báze faktù
a oèekávaných výsledkù, které jsou roz\-dìleny na klad\-né a zápor\-né pøí\-klady, met\-ody
pracující na základì ILP se snaží odvodit logický program, který dokáže všechny kladné
a žádný záporný pøíklad.
\paragraph{}
Významným zástupcem metod ILP, které pracují s metodami relaèního data\-miningu je algoritmus
WARMR. Je rozšíøením algoritmu APRIORI pro hledání relaèních asociaèních pravidel.
Detailní porovnání relaèního rozšíøení metody GUHA
a metody WARMR provádí T.Karban jako souèást své diser\-taèní práce
\cite{relminer}.